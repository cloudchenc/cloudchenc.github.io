<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.1">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"yoursite.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Less is more.">
<meta property="og:type" content="website">
<meta property="og:title" content="cloud&#39;s blog">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="cloud&#39;s blog">
<meta property="og:description" content="Less is more.">
<meta property="article:author" content="cloud">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://yoursite.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-Hans'
  };
</script>

  <title>cloud's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">cloud's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/07/09/%E5%89%91%E6%8C%87-Offer-63-%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E5%A4%A7%E5%88%A9%E6%B6%A6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="cloud">
      <meta itemprop="description" content="Less is more.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="cloud's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/09/%E5%89%91%E6%8C%87-Offer-63-%E8%82%A1%E7%A5%A8%E7%9A%84%E6%9C%80%E5%A4%A7%E5%88%A9%E6%B6%A6/" class="post-title-link" itemprop="url">å‰‘æŒ‡ -Offer-63- è‚¡ç¥¨çš„æœ€å¤§åˆ©æ¶¦</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-07-09 17:48:55 / Modified: 19:58:45" itemprop="dateCreated datePublished" datetime="2021-07-09T17:48:55+08:00">2021-07-09</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%91%E6%8C%87Offer/" itemprop="url" rel="index"><span itemprop="name">å‰‘æŒ‡Offer</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.7k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; å‡è®¾æŠŠæŸè‚¡ç¥¨çš„ä»·æ ¼æŒ‰ç…§æ—¶é—´å…ˆåé¡ºåºå­˜å‚¨åœ¨æ•°ç»„ä¸­ï¼Œè¯·é—®ä¹°å–è¯¥è‚¡ç¥¨ä¸€æ¬¡å¯èƒ½è·å¾—çš„æœ€å¤§åˆ©æ¶¦æ˜¯å¤šå°‘ï¼Ÿ </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹ 1: </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¾“å…¥: [7,1,5,3,6,4]</span><br><span class="line">&#x2F;&#x2F; è¾“å‡º: 5</span><br><span class="line">&#x2F;&#x2F; è§£é‡Š: åœ¨ç¬¬ 2 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ &#x3D; 1ï¼‰çš„æ—¶å€™ä¹°å…¥ï¼Œåœ¨ç¬¬ 5 å¤©ï¼ˆè‚¡ç¥¨ä»·æ ¼ &#x3D; 6ï¼‰çš„æ—¶å€™å–å‡ºï¼Œæœ€å¤§åˆ©æ¶¦ &#x3D; 6-1 &#x3D; 5 ã€‚</span><br><span class="line">&#x2F;&#x2F;     æ³¨æ„åˆ©æ¶¦ä¸èƒ½æ˜¯ 7-1 &#x3D; 6, å› ä¸ºå–å‡ºä»·æ ¼éœ€è¦å¤§äºä¹°å…¥ä»·æ ¼ã€‚</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹ 2: </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¾“å…¥: [7,6,4,3,1]</span><br><span class="line">&#x2F;&#x2F; è¾“å‡º: 0</span><br><span class="line">&#x2F;&#x2F; è§£é‡Š: åœ¨è¿™ç§æƒ…å†µä¸‹, æ²¡æœ‰äº¤æ˜“å®Œæˆ, æ‰€ä»¥æœ€å¤§åˆ©æ¶¦ä¸º 0ã€‚ </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; é™åˆ¶ï¼š </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; 0 &lt;&#x3D; æ•°ç»„é•¿åº¦ &lt;&#x3D; 10^5 </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 121 é¢˜ç›¸åŒï¼šhttps:&#x2F;&#x2F;leetcode-cn.com&#x2F;problems&#x2F;best-time-to-buy-and-sell-s</span><br><span class="line">&#x2F;&#x2F;tock&#x2F; </span><br><span class="line">&#x2F;&#x2F; Related Topics æ•°ç»„ åŠ¨æ€è§„åˆ’ </span><br><span class="line">&#x2F;&#x2F; ğŸ‘ 133 ğŸ‘ 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region begin(Prohibit modification and deletion)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region end(Prohibit modification and deletion)</span><br></pre></td></tr></table></figure>

<h2 id="åŠ¨æ€è§„åˆ’"><a href="# åŠ¨æ€è§„åˆ’" class="headerlink" title="åŠ¨æ€è§„åˆ’"></a>åŠ¨æ€è§„åˆ’</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] dp = <span class="keyword">new</span> <span class="keyword">int</span>[prices.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt; prices.length; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = prices[i] - prices[i - <span class="number">1</span>] + dp[i - <span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span> (tmp &gt; <span class="number">0</span>) dp[i] = tmp;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span> max = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j : dp) &#123;</span><br><span class="line">            max = Math.max(max, j);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>æ—¶é—´å¤æ‚åº¦ï¼šO(N)
ç©ºé—´å¤æ‚åº¦ï¼šO(N)
æ‰§è¡Œè€—æ—¶:2 ms, å‡»è´¥äº† 66.78% çš„ Java ç”¨æˆ·
å†…å­˜æ¶ˆè€—:38 MB, å‡»è´¥äº† 85.76% çš„ Java ç”¨æˆ· </code></pre><h2 id="éå†"><a href="# éå†" class="headerlink" title="éå†"></a> éå†</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">maxProfit</span><span class="params">(<span class="keyword">int</span>[] prices)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> minPrice = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">int</span> maxProfit = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; prices.length; i++) &#123;</span><br><span class="line">            <span class="keyword">int</span> tmp = prices[i];</span><br><span class="line">            <span class="keyword">if</span> (tmp &lt; minPrice) &#123;</span><br><span class="line">                minPrice = tmp;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (tmp - minPrice &gt; maxProfit) &#123;</span><br><span class="line">                maxProfit = tmp - minPrice;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> maxProfit;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>æ—¶é—´å¤æ‚åº¦ï¼šO(N)
ç©ºé—´å¤æ‚åº¦ï¼šO(1)
æ‰§è¡Œè€—æ—¶:1 ms, å‡»è´¥äº† 98.33% çš„ Java ç”¨æˆ·
å†…å­˜æ¶ˆè€—:38.1 MB, å‡»è´¥äº† 69.96% çš„ Java ç”¨æˆ·</code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/07/08/%E5%89%91%E6%8C%87-Offer-60-n%E4%B8%AA%E9%AA%B0%E5%AD%90%E7%9A%84%E7%82%B9%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="cloud">
      <meta itemprop="description" content="Less is more.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="cloud's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/08/%E5%89%91%E6%8C%87-Offer-60-n%E4%B8%AA%E9%AA%B0%E5%AD%90%E7%9A%84%E7%82%B9%E6%95%B0/" class="post-title-link" itemprop="url">å‰‘æŒ‡ -Offer-60-n ä¸ªéª°å­çš„ç‚¹æ•°</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-07-08 16:58:15 / Modified: 17:19:14" itemprop="dateCreated datePublished" datetime="2021-07-08T16:58:15+08:00">2021-07-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%91%E6%8C%87Offer/" itemprop="url" rel="index"><span itemprop="name">å‰‘æŒ‡Offer</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.4k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; æŠŠ n ä¸ªéª°å­æ‰”åœ¨åœ°ä¸Šï¼Œæ‰€æœ‰éª°å­æœä¸Šä¸€é¢çš„ç‚¹æ•°ä¹‹å’Œä¸º sã€‚è¾“å…¥ nï¼Œæ‰“å°å‡º s çš„æ‰€æœ‰å¯èƒ½çš„å€¼å‡ºç°çš„æ¦‚ç‡ã€‚ </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ä½ éœ€è¦ç”¨ä¸€ä¸ªæµ®ç‚¹æ•°æ•°ç»„è¿”å›ç­”æ¡ˆï¼Œå…¶ä¸­ç¬¬ i ä¸ªå…ƒç´ ä»£è¡¨è¿™ n ä¸ªéª°å­æ‰€èƒ½æ·å‡ºçš„ç‚¹æ•°é›†åˆä¸­ç¬¬ i å°çš„é‚£ä¸ªçš„æ¦‚ç‡ã€‚ </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹ 1: </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¾“å…¥: 1</span><br><span class="line">&#x2F;&#x2F; è¾“å‡º: [0.16667,0.16667,0.16667,0.16667,0.16667,0.16667]</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹ 2: </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¾“å…¥: 2</span><br><span class="line">&#x2F;&#x2F; è¾“å‡º: [0.02778,0.05556,0.08333,0.11111,0.13889,0.16667,0.13889,0.11111,0.08333,0</span><br><span class="line">&#x2F;&#x2F;.05556,0.02778]</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; é™åˆ¶ï¼š </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; 1 &lt;&#x3D; n &lt;&#x3D; 11 </span><br><span class="line">&#x2F;&#x2F; Related Topics æ•°å­¦ åŠ¨æ€è§„åˆ’ æ¦‚ç‡ä¸ç»Ÿè®¡ </span><br><span class="line">&#x2F;&#x2F; ğŸ‘ 258 ğŸ‘ 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region begin(Prohibit modification and deletion)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region end(Prohibit modification and deletion)</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">double</span>[] dicesProbability(<span class="keyword">int</span> n) &#123;</span><br><span class="line">        <span class="keyword">double</span>[] dp = <span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">6</span>];</span><br><span class="line">        Arrays.fill(dp, <span class="number">1.0</span> / <span class="number">6.0</span>); <span class="comment">// åˆå§‹åŒ– 1 ä¸ªéª°å­çš„æ¦‚ç‡åˆ†å¸ƒ </span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">2</span>; i &lt;= n; i++) &#123;</span><br><span class="line">            <span class="keyword">double</span>[] tmp = <span class="keyword">new</span> <span class="keyword">double</span>[<span class="number">5</span> * i + <span class="number">1</span>]; <span class="comment">// n ä¸ªéª°å­ [n, n+1, ..., 6n]</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; dp.length; j++) &#123; <span class="comment">// åœ¨ 'n-1' ä¸ªéª°å­çš„åŸºç¡€ä¸Šï¼Œè®¡ç®— 'n' ä¸ªéª°å­çš„æƒ…å†µ </span></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; <span class="number">6</span>; k++) &#123;</span><br><span class="line">                    tmp[j + k] += dp[j] / <span class="number">6.0</span>;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            dp = tmp;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> dp;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code> æ—¶é—´å¤æ‚åº¦ï¼šO(N ^ 2), &apos;N-1&apos; è½®è¿­ä»£ä¸­ï¼Œæ¯è½®è¿­ä»£çš„æ•°é‡æ˜¯ &apos;6*6, 11*6, 16*6, 5(N-1)*6&apos; æ¬¡
ç©ºé—´å¤æ‚åº¦ï¼šO(N)
æ‰§è¡Œè€—æ—¶:0 ms, å‡»è´¥äº† 100.00% çš„ Java ç”¨æˆ·
å†…å­˜æ¶ˆè€—:38.8 MB, å‡»è´¥äº† 26.78% çš„ Java ç”¨æˆ· </code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/07/07/%E5%89%91%E6%8C%87-Offer-48-%E6%9C%80%E9%95%BF%E4%B8%8D%E5%90%AB%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="cloud">
      <meta itemprop="description" content="Less is more.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="cloud's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/07/07/%E5%89%91%E6%8C%87-Offer-48-%E6%9C%80%E9%95%BF%E4%B8%8D%E5%90%AB%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E5%AD%90%E5%AD%97%E7%AC%A6%E4%B8%B2/" class="post-title-link" itemprop="url">å‰‘æŒ‡ -Offer-48- æœ€é•¿ä¸å«é‡å¤å­—ç¬¦çš„å­å­—ç¬¦ä¸²</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-07-07 10:39:15" itemprop="dateCreated datePublished" datetime="2021-07-07T10:39:15+08:00">2021-07-07</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-07-08 17:06:38" itemprop="dateModified" datetime="2021-07-08T17:06:38+08:00">2021-07-08</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%91%E6%8C%87Offer/" itemprop="url" rel="index"><span itemprop="name">å‰‘æŒ‡Offer</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>2.5k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; è¯·ä»å­—ç¬¦ä¸²ä¸­æ‰¾å‡ºä¸€ä¸ªæœ€é•¿çš„ä¸åŒ…å«é‡å¤å­—ç¬¦çš„å­å­—ç¬¦ä¸²ï¼Œè®¡ç®—è¯¥æœ€é•¿å­å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚ </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹ 1: </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¾“å…¥: &quot;abcabcbb&quot;</span><br><span class="line">&#x2F;&#x2F; è¾“å‡º: 3 </span><br><span class="line">&#x2F;&#x2F; è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;abc&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹ 2: </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¾“å…¥: &quot;bbbbb&quot;</span><br><span class="line">&#x2F;&#x2F; è¾“å‡º: 1</span><br><span class="line">&#x2F;&#x2F; è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯ &quot;b&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 1ã€‚</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹ 3: </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¾“å…¥: &quot;pwwkew&quot;</span><br><span class="line">&#x2F;&#x2F; è¾“å‡º: 3</span><br><span class="line">&#x2F;&#x2F; è§£é‡Š: å› ä¸ºæ— é‡å¤å­—ç¬¦çš„æœ€é•¿å­ä¸²æ˜¯Â &quot;wke&quot;ï¼Œæ‰€ä»¥å…¶é•¿åº¦ä¸º 3ã€‚</span><br><span class="line">&#x2F;&#x2F;Â     è¯·æ³¨æ„ï¼Œä½ çš„ç­”æ¡ˆå¿…é¡»æ˜¯ å­ä¸² çš„é•¿åº¦ï¼Œ&quot;pwke&quot;Â æ˜¯ä¸€ä¸ªå­åºåˆ—ï¼Œä¸æ˜¯å­ä¸²ã€‚</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; æç¤ºï¼š </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F; s.length &lt;&#x3D; 40000 </span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 3 é¢˜ç›¸åŒï¼šhttps:&#x2F;&#x2F;leetcode-cn.com&#x2F;problems&#x2F;longest-substring-without-rep</span><br><span class="line">&#x2F;&#x2F;eating-characters&#x2F; </span><br><span class="line">&#x2F;&#x2F; Related Topics å“ˆå¸Œè¡¨ å­—ç¬¦ä¸² æ»‘åŠ¨çª—å£ </span><br><span class="line">&#x2F;&#x2F; ğŸ‘ 232 ğŸ‘ 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region begin(Prohibit modification and deletion)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region end(Prohibit modification and deletion)</span><br></pre></td></tr></table></figure>

<h2 id="åŠ¨æ€è§„åˆ’ - å“ˆå¸Œè¡¨"><a href="# åŠ¨æ€è§„åˆ’ - å“ˆå¸Œè¡¨" class="headerlink" title="åŠ¨æ€è§„åˆ’ + å“ˆå¸Œè¡¨"></a>åŠ¨æ€è§„åˆ’ + å“ˆå¸Œè¡¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç©ºé—´æ¢æ—¶é—´</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        Map&lt;Character, Integer&gt; dp = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>, tmp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; s.length(); j++) &#123;</span><br><span class="line">            <span class="keyword">char</span> c = s.charAt(j);</span><br><span class="line">            <span class="keyword">int</span> i = dp.getOrDefault(c, -<span class="number">1</span>);</span><br><span class="line">            dp.put(c, j);</span><br><span class="line">            tmp = tmp &lt; j - i ? tmp + <span class="number">1</span> : j - i;</span><br><span class="line">            res = Math.max(res, tmp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N ä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼ŒåŠ¨æ€è§„åˆ’éœ€éå†è®¡ç®— dp åˆ—è¡¨
ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œå­—ç¬¦çš„ ASCII ç èŒƒå›´ä¸º 0 ~ 127 ï¼Œå“ˆå¸Œè¡¨ dic æœ€å¤šä½¿ç”¨ O(128) = O(1) å¤§å°çš„é¢å¤–ç©ºé—´
æ‰§è¡Œè€—æ—¶:7 ms, å‡»è´¥äº† 82.29% çš„ Java ç”¨æˆ·
å†…å­˜æ¶ˆè€—:38.5 MB, å‡»è´¥äº† 43.02% çš„ Java ç”¨æˆ· </code></pre><h2 id="åŒæŒ‡é’ˆ - å“ˆå¸Œè¡¨"><a href="# åŒæŒ‡é’ˆ - å“ˆå¸Œè¡¨" class="headerlink" title="åŒæŒ‡é’ˆ + å“ˆå¸Œè¡¨"></a> åŒæŒ‡é’ˆ + å“ˆå¸Œè¡¨</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        Map&lt;Character, Integer&gt; dic = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>, i = -<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; s.length(); j++) &#123;</span><br><span class="line">            <span class="keyword">char</span> c = s.charAt(j);</span><br><span class="line">            <span class="keyword">if</span> (dic.containsKey(c)) &#123;</span><br><span class="line">                i = Math.max(i, dic.get(c));</span><br><span class="line">            &#125;</span><br><span class="line">            dic.put(c, j);</span><br><span class="line">            res = Math.max(res, j - i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>æ—¶é—´å¤æ‚åº¦ï¼šO(N)ï¼Œå…¶ä¸­ N ä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼ŒåŠ¨æ€è§„åˆ’éœ€éå†è®¡ç®— dp åˆ—è¡¨ã€‚
ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œå­—ç¬¦çš„ ASCII ç èŒƒå›´ä¸º 0 ~ 127 ï¼Œå“ˆå¸Œè¡¨ dic æœ€å¤šä½¿ç”¨ O(128) = O(1) å¤§å°çš„é¢å¤–ç©ºé—´
æ‰§è¡Œè€—æ—¶:6 ms, å‡»è´¥äº† 90.90% çš„ Java ç”¨æˆ·
å†…å­˜æ¶ˆè€—:38 MB, å‡»è´¥äº† 98.34% çš„ Java ç”¨æˆ· </code></pre><h2 id="åŠ¨æ€è§„åˆ’ - çº¿æ€§éå†"><a href="# åŠ¨æ€è§„åˆ’ - çº¿æ€§éå†" class="headerlink" title="åŠ¨æ€è§„åˆ’ + çº¿æ€§éå†"></a> åŠ¨æ€è§„åˆ’ + çº¿æ€§éå†</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ—¶é—´æ¢ç©ºé—´</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">lengthOfLongestSubstring</span><span class="params">(String s)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> res = <span class="number">0</span>, tmp = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; s.length(); j++) &#123;</span><br><span class="line">            <span class="keyword">int</span> i = j - <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span> (i &gt;= <span class="number">0</span> &amp;&amp; s.charAt(i) != s.charAt(j)) i--;</span><br><span class="line">            tmp = tmp &lt; j - i ? tmp + <span class="number">1</span> : j - i;</span><br><span class="line">            res = Math.max(res, tmp);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>æ—¶é—´å¤æ‚åº¦ï¼šO(N^2)ï¼Œå…¶ä¸­ N ä¸ºå­—ç¬¦ä¸²é•¿åº¦ï¼ŒåŠ¨æ€è§„åˆ’éœ€éå†è®¡ç®— dp åˆ—è¡¨ï¼Œå ç”¨ O(N) ï¼›æ¯è½®è®¡ç®— dp[j] æ—¶æœç´¢ i éœ€è¦éå† j ä¸ªå­—ç¬¦ï¼Œå ç”¨ O(N) ã€‚
ç©ºé—´å¤æ‚åº¦ï¼šO(1)ï¼Œå‡ ä¸ªå˜é‡ä½¿ç”¨å¸¸æ•°å¤§å°çš„é¢å¤–ç©ºé—´
æ‰§è¡Œè€—æ—¶:13 ms, å‡»è´¥äº† 14.91% çš„ Java ç”¨æˆ·
å†…å­˜æ¶ˆè€—:38.2 MB, å‡»è´¥äº† 93.24% çš„ Java ç”¨æˆ·</code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/06/28/%E7%8E%A9%E6%89%8B%E6%9C%BA%E7%9A%84%E6%97%B6%E5%80%99%E7%A9%B6%E7%AB%9F%E5%9C%A8%E7%8E%A9%E4%BB%80%E4%B9%88/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="cloud">
      <meta itemprop="description" content="Less is more.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="cloud's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/06/28/%E7%8E%A9%E6%89%8B%E6%9C%BA%E7%9A%84%E6%97%B6%E5%80%99%E7%A9%B6%E7%AB%9F%E5%9C%A8%E7%8E%A9%E4%BB%80%E4%B9%88/" class="post-title-link" itemprop="url">ç©æ‰‹æœºçš„æ—¶å€™ç©¶ç«Ÿåœ¨ç©ä»€ä¹ˆ</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-06-28 15:56:19 / Modified: 16:49:26" itemprop="dateCreated datePublished" datetime="2021-06-28T15:56:19+08:00">2021-06-28</time>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>469</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p> ä½ ç©æ‰‹æœºçš„æ—¶å€™ç©¶ç«Ÿåœ¨ç©ä»€ä¹ˆï¼Ÿ</p>
<p> å¾®ä¿¡ï¼Ÿ<br> æŠ–éŸ³ï¼Ÿ<br> çŸ¥ä¹ï¼Ÿ</p>
<p> æ€è€ƒä¸€ä¸‹ï¼Œä½ çš„çœŸæ­£è¯‰æ±‚æ˜¯ä»€ä¹ˆï¼Ÿé—®é¢˜å°±å˜æˆäº†åˆ·å¾®ä¿¡ / æŠ–éŸ³ / çŸ¥ä¹çš„æ—¶å€™ï¼Œåˆ·çš„å†…å®¹åˆ°åº•ä»€ä¹ˆï¼Ÿ</p>
<p> å¾®ä¿¡ï¼Œæ˜¯é›†èŠå¤©ã€æœ‹å‹åœˆã€å…¬ä¼—å·ã€è§†é¢‘å·ï¼ˆä»¥ä¸‹ç§°ä¸ºå››ç§æ¸ é“ï¼‰ä¸ºä¸€ä½“çš„å›½æ°‘çº§åº”ç”¨ã€‚å¦‚æœè¯´æ‰‹æœºä¸Šåªèƒ½ç•™ä¸‹ä¸€ä¸ªåº”ç”¨ï¼Œæˆ‘ç›¸ä¿¡ä¸€å®šæ˜¯å¾®ä¿¡ã€‚å¯ä»¥è¯´å®ƒæ˜¯ä¸€æ‰‡çª—ï¼Œé“¾æ¥äº†ä½ å’Œä»–äººï¼Œæ»¡è¶³äº†äººçš„ç¤¾ä¼šå±æ€§ï¼Œ<br> æ»¡è¶³äº†å¤§å®¶æ²Ÿé€šçš„è¯‰æ±‚ï¼Œé€šè¿‡å››ç§æ¸ é“ï¼Œæ‹‰è¿‘äº†å½¼æ­¤çš„è·ç¦»ï¼Œè¿™ä¹Ÿå°±æ˜¯å½“ä¸‹ç§åŸŸæµé‡çš„åŸºç¡€ã€‚</p>
<p> æŠ–éŸ³ï¼Œè®°å½•ç¾å¥½ç”Ÿæ´»ã€‚å­—èŠ‚çš„ä¸€æ¬¾ç°è±¡çº§åº”ç”¨ï¼Œä¾æ®å…´è¶£æ¨èï¼Œæ¨é€ç»™ç”¨æˆ·æ— é™çš„ feed æµã€‚å…¶å®åƒäººåƒé¢çš„åšæ³•ï¼Œæ—©åœ¨ç”µå•†å¤§æ•°æ®æ—¶æœŸå°±æœ‰ä½¿ç”¨ï¼Œç°åœ¨å­—èŠ‚æŠŠè¿™ä¸€åšæ³•å‘æ‰¬å…‰å¤§ï¼Œå®Œå–„ç”¨æˆ·ç”»åƒï¼Œè®­ç»ƒå†…å®¹æ¨èå¼•æ“ï¼Œ<br> åšåˆ°äº†ç”¨æˆ·çœ‹è§çš„å†…å®¹å¤§æ¦‚ç‡æ˜¯æ„Ÿå…´è¶£çš„ï¼Œå……åˆ†æ»¡è¶³äº†ç”¨æˆ·çš„å¥½å¥‡å¿ƒã€‚æ­£å¦‚ã€Šé˜¿ç”˜æ­£ä¼ ã€‹ä¸­è¯´çš„â€ç”Ÿæ´»å°±åƒå·§å…‹åŠ›ï¼Œä½ æ°¸è¿œä¸çŸ¥é“ä¸‹ä¸€é¢—çš„å‘³é“æ˜¯ä»€ä¹ˆâ€ï¼ŒæŠ–éŸ³å°±åƒä¸€é¢—åŒ…è£¹ç€ç³–æµ†çš„å·§å…‹åŠ›ï¼Œè®©ç”¨æˆ·éš¾ä»¥å¿˜æ€€ã€‚</p>
<p> çŸ¥ä¹ï¼Œäººåœ¨ç¾å›½ï¼Œåˆšä¸‹é£æœºã€‚æ–‡å­—åˆ›ä½œè€…çš„å¤§æœ¬è¥ï¼Œæ¯ä¸ªå¤§ V éƒ½æˆ–å¤šæˆ–å°‘çš„åœ¨çŸ¥ä¹ä¸Šç•™ä¸‹è¿‡ç—•è¿¹ï¼Œ</p>
<p> ç§»åŠ¨äº’è”ç½‘æ—¶ä»£ï¼ŒæŠŠäººä»¬ä»æ–‡å­—æ—¶ä»£å¸¦åˆ°äº†è§†é¢‘æ—¶ä»£ï¼Œæœªæ¥è§†é¢‘ä¸€å®šæ˜¯ </p>
<p> æ¥”å­ </p>
<p> æçº² </p>
<p> å½“ä¸‹åœºæ™¯ </p>
<p> æ€»ç»“ </p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/05/31/PMS/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="cloud">
      <meta itemprop="description" content="Less is more.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="cloud's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/31/PMS/" class="post-title-link" itemprop="url">PMS</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-05-31 22:00:45" itemprop="dateCreated datePublished" datetime="2021-05-31T22:00:45+08:00">2021-05-31</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-06-07 19:43:29" itemprop="dateModified" datetime="2021-06-07T19:43:29+08:00">2021-06-07</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/AOSP/" itemprop="url" rel="index"><span itemprop="name">AOSP</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>21k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>19 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p> æœ¬æ–‡åŸºäº android-30 æºç åˆ†æ </p>
<h1 id="PMS"><a href="#PMS" class="headerlink" title="PMS"></a>PMS</h1><p>PackageManagerService æ˜¯ Android ç³»ç»ŸæœåŠ¡ï¼Œåœ¨ SystemServer ä¸­ä½œä¸ºå¼•å¯¼æœåŠ¡åˆ›å»º </p>
<h2 id="PMS åˆ›å»º"><a href="#PMS åˆ›å»º" class="headerlink" title="PMS åˆ›å»º"></a>PMS åˆ›å»º </h2><p>zygote â€“&gt; SystemServer#main()</p>
<h3 id="SystemServer-run"><a href="#SystemServer-run" class="headerlink" title="SystemServer#run()"></a>SystemServer#run()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com.android.server.SystemServer#main</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * The main entry point from zygote.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">new</span> SystemServer().run();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com.android.server.SystemServer#run</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    TimingsTraceAndSlog t = <span class="keyword">new</span> TimingsTraceAndSlog();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        t.traceBegin(<span class="string">"InitBeforeStartServices"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Record the process start information in sys props.</span></span><br><span class="line">        SystemProperties.set(SYSPROP_START_COUNT, String.valueOf(mStartCount));</span><br><span class="line">        SystemProperties.set(SYSPROP_START_ELAPSED, String.valueOf(mRuntimeStartElapsedTime));</span><br><span class="line">        SystemProperties.set(SYSPROP_START_UPTIME, String.valueOf(mRuntimeStartUptime));</span><br><span class="line"></span><br><span class="line">        EventLog.writeEvent(EventLogTags.SYSTEM_SERVER_START,</span><br><span class="line">                mStartCount, mRuntimeStartUptime, mRuntimeStartElapsedTime);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// Default the timezone property to GMT if not set.</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        String timezoneProperty = SystemProperties.get(<span class="string">"persist.sys.timezone"</span>);</span><br><span class="line">        <span class="keyword">if</span> (timezoneProperty == <span class="keyword">null</span> || timezoneProperty.isEmpty()) &#123;</span><br><span class="line">            Slog.w(TAG, <span class="string">"Timezone not set; setting to GMT."</span>);</span><br><span class="line">            SystemProperties.set(<span class="string">"persist.sys.timezone"</span>, <span class="string">"GMT"</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// If the system has "persist.sys.language" and friends set, replace them with</span></span><br><span class="line">        <span class="comment">// "persist.sys.locale". Note that the default locale at this point is calculated</span></span><br><span class="line">        <span class="comment">// using the "-Duser.locale" command line flag. That flag is usually populated by</span></span><br><span class="line">        <span class="comment">// AndroidRuntime using the same set of system properties, but only the system_server</span></span><br><span class="line">        <span class="comment">// and system apps are allowed to set them.</span></span><br><span class="line">        <span class="comment">//</span></span><br><span class="line">        <span class="comment">// <span class="doctag">NOTE:</span> Most changes made here will need an equivalent change to</span></span><br><span class="line">        <span class="comment">// core/jni/AndroidRuntime.cpp</span></span><br><span class="line">        <span class="keyword">if</span> (!SystemProperties.get(<span class="string">"persist.sys.language"</span>).isEmpty()) &#123;</span><br><span class="line">            <span class="keyword">final</span> String languageTag = Locale.getDefault().toLanguageTag();</span><br><span class="line"></span><br><span class="line">            SystemProperties.set(<span class="string">"persist.sys.locale"</span>, languageTag);</span><br><span class="line">            SystemProperties.set(<span class="string">"persist.sys.language"</span>, <span class="string">""</span>);</span><br><span class="line">            SystemProperties.set(<span class="string">"persist.sys.country"</span>, <span class="string">""</span>);</span><br><span class="line">            SystemProperties.set(<span class="string">"persist.sys.localevar"</span>, <span class="string">""</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// The system server should never make non-oneway calls</span></span><br><span class="line">        Binder.setWarnOnBlocking(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">// The system server should always load safe labels</span></span><br><span class="line">        PackageItemInfo.forceSafeLabels();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Default to FULL within the system server.</span></span><br><span class="line">        SQLiteGlobal.sDefaultSyncMode = SQLiteGlobal.SYNC_MODE_FULL;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Deactivate SQLiteCompatibilityWalFlags until settings provider is initialized</span></span><br><span class="line">        SQLiteCompatibilityWalFlags.init(<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Here we go!</span></span><br><span class="line">        Slog.i(TAG, <span class="string">"Entered the Android system server!"</span>);</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">long</span> uptimeMillis = SystemClock.elapsedRealtime();</span><br><span class="line">        EventLog.writeEvent(EventLogTags.BOOT_PROGRESS_SYSTEM_RUN, uptimeMillis);</span><br><span class="line">        <span class="keyword">if</span> (!mRuntimeRestart) &#123;</span><br><span class="line">            FrameworkStatsLog.write(FrameworkStatsLog.BOOT_TIME_EVENT_ELAPSED_TIME_REPORTED,</span><br><span class="line">                    FrameworkStatsLog</span><br><span class="line">                            .BOOT_TIME_EVENT_ELAPSED_TIME__EVENT__SYSTEM_SERVER_INIT_START,</span><br><span class="line">                    uptimeMillis);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// In case the runtime switched since last boot (such as when</span></span><br><span class="line">        <span class="comment">// the old runtime was removed in an OTA), set the system</span></span><br><span class="line">        <span class="comment">// property so that it is in sync. We can't do this in</span></span><br><span class="line">        <span class="comment">// libnativehelper's JniInvocation::Init code where we already</span></span><br><span class="line">        <span class="comment">// had to fallback to a different runtime because it is</span></span><br><span class="line">        <span class="comment">// running as root and we need to be the system user to set</span></span><br><span class="line">        <span class="comment">// the property. http://b/11463182</span></span><br><span class="line">        SystemProperties.set(<span class="string">"persist.sys.dalvik.vm.lib.2"</span>, VMRuntime.getRuntime().vmLibrary());</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Mmmmmm... more memory!</span></span><br><span class="line">        VMRuntime.getRuntime().clearGrowthLimit();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Some devices rely on runtime fingerprint generation, so make sure</span></span><br><span class="line">        <span class="comment">// we've defined it before booting further.</span></span><br><span class="line">        Build.ensureFingerprintProperty();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Within the system server, it is an error to access Environment paths without</span></span><br><span class="line">        <span class="comment">// explicitly specifying a user.</span></span><br><span class="line">        Environment.setUserRequired(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Within the system server, any incoming Bundles should be defused</span></span><br><span class="line">        <span class="comment">// to avoid throwing BadParcelableException.</span></span><br><span class="line">        BaseBundle.setShouldDefuse(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Within the system server, when parceling exceptions, include the stack trace</span></span><br><span class="line">        Parcel.setStackTraceParceling(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Ensure binder calls into the system always run at foreground priority.</span></span><br><span class="line">        BinderInternal.disableBackgroundScheduling(<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Increase the number of binder threads in system_server</span></span><br><span class="line">        BinderInternal.setMaxThreads(sMaxBinderThreads);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Prepare the main looper thread (this thread).</span></span><br><span class="line">        android.os.Process.setThreadPriority(</span><br><span class="line">                android.os.Process.THREAD_PRIORITY_FOREGROUND);</span><br><span class="line">        android.os.Process.setCanSelfBackground(<span class="keyword">false</span>);</span><br><span class="line">        Looper.prepareMainLooper();</span><br><span class="line">        Looper.getMainLooper().setSlowLogThresholdMs(</span><br><span class="line">                SLOW_DISPATCH_THRESHOLD_MS, SLOW_DELIVERY_THRESHOLD_MS);</span><br><span class="line"></span><br><span class="line">        SystemServiceRegistry.sEnableServiceNotFoundWtf = <span class="keyword">true</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Initialize native services.</span></span><br><span class="line">        System.loadLibrary(<span class="string">"android_servers"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Allow heap / perf profiling.</span></span><br><span class="line">        initZygoteChildHeapProfiling();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Debug builds - spawn a thread to monitor for fd leaks.</span></span><br><span class="line">        <span class="keyword">if</span> (Build.IS_DEBUGGABLE) &#123;</span><br><span class="line">            spawnFdLeakCheckThread();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Check whether we failed to shut down last time we tried.</span></span><br><span class="line">        <span class="comment">// This call may not return.</span></span><br><span class="line">        performPendingShutdown();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Initialize the system context.</span></span><br><span class="line">        createSystemContext();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Call per-process mainline module initialization.</span></span><br><span class="line">        ActivityThread.initializeMainlineModules();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// Create the system service manager.</span></span><br><span class="line">        mSystemServiceManager = <span class="keyword">new</span> SystemServiceManager(mSystemContext);</span><br><span class="line">        mSystemServiceManager.setStartInfo(mRuntimeRestart,</span><br><span class="line">                mRuntimeStartElapsedTime, mRuntimeStartUptime);</span><br><span class="line">        LocalServices.addService(SystemServiceManager<span class="class">.<span class="keyword">class</span>, <span class="title">mSystemServiceManager</span>)</span>;</span><br><span class="line">        <span class="comment">// Prepare the thread pool for init tasks that can be parallelized</span></span><br><span class="line">        SystemServerInitThreadPool.start();</span><br><span class="line">        <span class="comment">// Attach JVMTI agent if this is a debuggable build and the system property is set.</span></span><br><span class="line">        <span class="keyword">if</span> (Build.IS_DEBUGGABLE) &#123;</span><br><span class="line">            <span class="comment">// Property is of the form "library_path=parameters".</span></span><br><span class="line">            String jvmtiAgent = SystemProperties.get(<span class="string">"persist.sys.dalvik.jvmtiagent"</span>);</span><br><span class="line">            <span class="keyword">if</span> (!jvmtiAgent.isEmpty()) &#123;</span><br><span class="line">                <span class="keyword">int</span> equalIndex = jvmtiAgent.indexOf(<span class="string">'='</span>);</span><br><span class="line">                String libraryPath = jvmtiAgent.substring(<span class="number">0</span>, equalIndex);</span><br><span class="line">                String parameterList =</span><br><span class="line">                        jvmtiAgent.substring(equalIndex + <span class="number">1</span>, jvmtiAgent.length());</span><br><span class="line">                <span class="comment">// Attach the agent.</span></span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    Debug.attachJvmtiAgent(libraryPath, parameterList, <span class="keyword">null</span>);</span><br><span class="line">                &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                    Slog.e(<span class="string">"System"</span>, <span class="string">"*************************************************"</span>);</span><br><span class="line">                    Slog.e(<span class="string">"System"</span>, <span class="string">"********** Failed to load jvmti plugin:"</span> + jvmtiAgent);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        t.traceEnd();  <span class="comment">// InitBeforeStartServices</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Setup the default WTF handler</span></span><br><span class="line">    RuntimeInit.setDefaultApplicationWtfHandler(SystemServer::handleEarlySystemWtf);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start services.</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        t.traceBegin(<span class="string">"StartServices"</span>);</span><br><span class="line">        startBootstrapServices(t);</span><br><span class="line">        startCoreServices(t);</span><br><span class="line">        startOtherServices(t);</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">        Slog.e(<span class="string">"System"</span>, <span class="string">"******************************************"</span>);</span><br><span class="line">        Slog.e(<span class="string">"System"</span>, <span class="string">"************ Failure starting system services"</span>, ex);</span><br><span class="line">        <span class="keyword">throw</span> ex;</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        t.traceEnd(); <span class="comment">// StartServices</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    StrictMode.initVmDefaults(<span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!mRuntimeRestart &amp;&amp; !isFirstBootOrUpgrade()) &#123;</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">long</span> uptimeMillis = SystemClock.elapsedRealtime();</span><br><span class="line">        FrameworkStatsLog.write(FrameworkStatsLog.BOOT_TIME_EVENT_ELAPSED_TIME_REPORTED,</span><br><span class="line">                FrameworkStatsLog.BOOT_TIME_EVENT_ELAPSED_TIME__EVENT__SYSTEM_SERVER_READY,</span><br><span class="line">                uptimeMillis);</span><br><span class="line">        <span class="keyword">final</span> <span class="keyword">long</span> maxUptimeMillis = <span class="number">60</span> * <span class="number">1000</span>;</span><br><span class="line">        <span class="keyword">if</span> (uptimeMillis &gt; maxUptimeMillis) &#123;</span><br><span class="line">            Slog.wtf(SYSTEM_SERVER_TIMING_TAG,</span><br><span class="line">                    <span class="string">"SystemServer init took too long. uptimeMillis="</span> + uptimeMillis);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Diagnostic to ensure that the system is in a base healthy state. Done here as a common</span></span><br><span class="line">    <span class="comment">// non-zygote process.</span></span><br><span class="line">    <span class="keyword">if</span> (!VMRuntime.hasBootImageSpaces()) &#123;</span><br><span class="line">        Slog.wtf(TAG, <span class="string">"Runtime is not running with a boot image!"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Loop forever.</span></span><br><span class="line">    Looper.loop();</span><br><span class="line">    <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">"Main thread loop unexpectedly exited"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com.android.server.SystemServer#startBootstrapServices</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Starts the small tangle of critical services that are needed to get the system off the</span></span><br><span class="line"><span class="comment"> * ground.  These services have complex mutual dependencies which is why we initialize them all</span></span><br><span class="line"><span class="comment"> * in one place here.  Unless your service is also entwined in these dependencies, it should be</span></span><br><span class="line"><span class="comment"> * initialized in one of the other functions.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">startBootstrapServices</span><span class="params">(@NonNull TimingsTraceAndSlog t)</span> </span>&#123;</span><br><span class="line">    t.traceBegin(<span class="string">"startBootstrapServices"</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start the watchdog as early as possible so we can crash the system server</span></span><br><span class="line">    <span class="comment">// if we deadlock during early boot</span></span><br><span class="line">    t.traceBegin(<span class="string">"StartWatchdog"</span>);</span><br><span class="line">    <span class="keyword">final</span> Watchdog watchdog = Watchdog.getInstance();</span><br><span class="line">    watchdog.start();</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    Slog.i(TAG, <span class="string">"Reading configuration..."</span>);</span><br><span class="line">    <span class="keyword">final</span> String TAG_SYSTEM_CONFIG = <span class="string">"ReadingSystemConfig"</span>;</span><br><span class="line">    t.traceBegin(TAG_SYSTEM_CONFIG);</span><br><span class="line">    SystemServerInitThreadPool.submit(SystemConfig::getInstance, TAG_SYSTEM_CONFIG);</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Platform compat service is used by ActivityManagerService, PackageManagerService, and</span></span><br><span class="line">    <span class="comment">// possibly others in the future. b/135010838.</span></span><br><span class="line">    t.traceBegin(<span class="string">"PlatformCompat"</span>);</span><br><span class="line">    PlatformCompat platformCompat = <span class="keyword">new</span> PlatformCompat(mSystemContext);</span><br><span class="line">    ServiceManager.addService(Context.PLATFORM_COMPAT_SERVICE, platformCompat);</span><br><span class="line">    ServiceManager.addService(Context.PLATFORM_COMPAT_NATIVE_SERVICE,</span><br><span class="line">            <span class="keyword">new</span> PlatformCompatNative(platformCompat));</span><br><span class="line">    AppCompatCallbacks.install(<span class="keyword">new</span> <span class="keyword">long</span>[<span class="number">0</span>]);</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// FileIntegrityService responds to requests from apps and the system. It needs to run after</span></span><br><span class="line">    <span class="comment">// the source (i.e. keystore) is ready, and before the apps (or the first customer in the</span></span><br><span class="line">    <span class="comment">// system) run.</span></span><br><span class="line">    t.traceBegin(<span class="string">"StartFileIntegrityService"</span>);</span><br><span class="line">    mSystemServiceManager.startService(FileIntegrityService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Wait for installd to finish starting up so that it has a chance to</span></span><br><span class="line">    <span class="comment">// create critical directories such as /data/user with the appropriate</span></span><br><span class="line">    <span class="comment">// permissions.  We need this to complete before we initialize other services.</span></span><br><span class="line">    t.traceBegin(<span class="string">"StartInstaller"</span>);</span><br><span class="line">    Installer installer = mSystemServiceManager.startService(Installer<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// In some cases after launching an app we need to access device identifiers,</span></span><br><span class="line">    <span class="comment">// therefore register the device identifier policy before the activity manager.</span></span><br><span class="line">    t.traceBegin(<span class="string">"DeviceIdentifiersPolicyService"</span>);</span><br><span class="line">    mSystemServiceManager.startService(DeviceIdentifiersPolicyService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Uri Grants Manager.</span></span><br><span class="line">    t.traceBegin(<span class="string">"UriGrantsManagerService"</span>);</span><br><span class="line">    mSystemServiceManager.startService(UriGrantsManagerService.Lifecycle<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Activity manager runs the show.</span></span><br><span class="line">    t.traceBegin(<span class="string">"StartActivityManager"</span>);</span><br><span class="line">    <span class="comment">// <span class="doctag">TODO:</span> Might need to move after migration to WM.</span></span><br><span class="line">    ActivityTaskManagerService atm = mSystemServiceManager.startService(</span><br><span class="line">            ActivityTaskManagerService.Lifecycle<span class="class">.<span class="keyword">class</span>).<span class="title">getService</span>()</span>;</span><br><span class="line">    mActivityManagerService = ActivityManagerService.Lifecycle.startService(</span><br><span class="line">            mSystemServiceManager, atm);</span><br><span class="line">    mActivityManagerService.setSystemServiceManager(mSystemServiceManager);</span><br><span class="line">    mActivityManagerService.setInstaller(installer);</span><br><span class="line">    mWindowManagerGlobalLock = atm.getGlobalLock();</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Data loader manager service needs to be started before package manager</span></span><br><span class="line">    t.traceBegin(<span class="string">"StartDataLoaderManagerService"</span>);</span><br><span class="line">    mDataLoaderManagerService = mSystemServiceManager.startService(</span><br><span class="line">            DataLoaderManagerService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Incremental service needs to be started before package manager</span></span><br><span class="line">    t.traceBegin(<span class="string">"StartIncrementalService"</span>);</span><br><span class="line">    mIncrementalServiceHandle = startIncrementalService();</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Power manager needs to be started early because other services need it.</span></span><br><span class="line">    <span class="comment">// Native daemons may be watching for it to be registered so it must be ready</span></span><br><span class="line">    <span class="comment">// to handle incoming binder calls immediately (including being able to verify</span></span><br><span class="line">    <span class="comment">// the permissions for those calls).</span></span><br><span class="line">    t.traceBegin(<span class="string">"StartPowerManager"</span>);</span><br><span class="line">    mPowerManagerService = mSystemServiceManager.startService(PowerManagerService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    t.traceBegin(<span class="string">"StartThermalManager"</span>);</span><br><span class="line">    mSystemServiceManager.startService(ThermalManagerService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Now that the power manager has been started, let the activity manager</span></span><br><span class="line">    <span class="comment">// initialize power management features.</span></span><br><span class="line">    t.traceBegin(<span class="string">"InitPowerManagement"</span>);</span><br><span class="line">    mActivityManagerService.initPowerManagement();</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Bring up recovery system in case a rescue party needs a reboot</span></span><br><span class="line">    t.traceBegin(<span class="string">"StartRecoverySystemService"</span>);</span><br><span class="line">    mSystemServiceManager.startService(RecoverySystemService.Lifecycle<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Now that we have the bare essentials of the OS up and running, take</span></span><br><span class="line">    <span class="comment">// note that we just booted, which might send out a rescue party if</span></span><br><span class="line">    <span class="comment">// we're stuck in a runtime restart loop.</span></span><br><span class="line">    RescueParty.registerHealthObserver(mSystemContext);</span><br><span class="line">    PackageWatchdog.getInstance(mSystemContext).noteBoot();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Manages LEDs and display backlight so we need it to bring up the display.</span></span><br><span class="line">    t.traceBegin(<span class="string">"StartLightsService"</span>);</span><br><span class="line">    mSystemServiceManager.startService(LightsService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    t.traceBegin(<span class="string">"StartSidekickService"</span>);</span><br><span class="line">    <span class="comment">// Package manager isn't started yet; need to use SysProp not hardware feature</span></span><br><span class="line">    <span class="keyword">if</span> (SystemProperties.getBoolean(<span class="string">"config.enable_sidekick_graphics"</span>, <span class="keyword">false</span>)) &#123;</span><br><span class="line">        mSystemServiceManager.startService(WEAR_SIDEKICK_SERVICE_CLASS);</span><br><span class="line">    &#125;</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Display manager is needed to provide display metrics before package manager</span></span><br><span class="line">    <span class="comment">// starts up.</span></span><br><span class="line">    t.traceBegin(<span class="string">"StartDisplayManager"</span>);</span><br><span class="line">    mDisplayManagerService = mSystemServiceManager.startService(DisplayManagerService<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// We need the default display before we can initialize the package manager.</span></span><br><span class="line">    t.traceBegin(<span class="string">"WaitForDisplay"</span>);</span><br><span class="line">    mSystemServiceManager.startBootPhase(t, SystemService.PHASE_WAIT_FOR_DEFAULT_DISPLAY);</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Only run "core" apps if we're encrypting the device.</span></span><br><span class="line">    String cryptState = VoldProperties.decrypt().orElse(<span class="string">""</span>);</span><br><span class="line">    <span class="keyword">if</span> (ENCRYPTING_STATE.equals(cryptState)) &#123;</span><br><span class="line">        Slog.w(TAG, <span class="string">"Detected encryption in progress - only parsing core apps"</span>);</span><br><span class="line">        mOnlyCore = <span class="keyword">true</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (ENCRYPTED_STATE.equals(cryptState)) &#123;</span><br><span class="line">        Slog.w(TAG, <span class="string">"Device encrypted - only parsing core apps"</span>);</span><br><span class="line">        mOnlyCore = <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Start the package manager.</span></span><br><span class="line">    <span class="keyword">if</span> (!mRuntimeRestart) &#123;</span><br><span class="line">        FrameworkStatsLog.write(FrameworkStatsLog.BOOT_TIME_EVENT_ELAPSED_TIME_REPORTED,</span><br><span class="line">                FrameworkStatsLog</span><br><span class="line">                        .BOOT_TIME_EVENT_ELAPSED_TIME__EVENT__PACKAGE_MANAGER_INIT_START,</span><br><span class="line">                SystemClock.elapsedRealtime());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    t.traceBegin(<span class="string">"StartPackageManagerService"</span>);</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        Watchdog.getInstance().pauseWatchingCurrentThread(<span class="string">"packagemanagermain"</span>);</span><br><span class="line">        mPackageManagerService = PackageManagerService.main(mSystemContext, installer,</span><br><span class="line">                mFactoryTestMode != FactoryTest.FACTORY_TEST_OFF, mOnlyCore);</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        Watchdog.getInstance().resumeWatchingCurrentThread(<span class="string">"packagemanagermain"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Now that the package manager has started, register the dex load reporter to capture any</span></span><br><span class="line">    <span class="comment">// dex files loaded by system server.</span></span><br><span class="line">    <span class="comment">// These dex files will be optimized by the BackgroundDexOptService.</span></span><br><span class="line">    SystemServerDexLoadReporter.configureSystemServerDexReporter(mPackageManagerService);</span><br><span class="line"></span><br><span class="line">    mFirstBoot = mPackageManagerService.isFirstBoot();</span><br><span class="line">    mPackageManager = mSystemContext.getPackageManager();</span><br><span class="line">    t.traceEnd();</span><br><span class="line">    <span class="keyword">if</span> (!mRuntimeRestart &amp;&amp; !isFirstBootOrUpgrade()) &#123;</span><br><span class="line">        FrameworkStatsLog.write(FrameworkStatsLog.BOOT_TIME_EVENT_ELAPSED_TIME_REPORTED,</span><br><span class="line">                FrameworkStatsLog</span><br><span class="line">                        .BOOT_TIME_EVENT_ELAPSED_TIME__EVENT__PACKAGE_MANAGER_INIT_READY,</span><br><span class="line">                SystemClock.elapsedRealtime());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// Manages A/B OTA dexopting. This is a bootstrap service as we need it to rename</span></span><br><span class="line">    <span class="comment">// A/B artifacts after boot, before anything else might touch/need them.</span></span><br><span class="line">    <span class="comment">// Note: this isn't needed during decryption (we don't have /data anyways).</span></span><br><span class="line">    <span class="keyword">if</span> (!mOnlyCore) &#123;</span><br><span class="line">        <span class="keyword">boolean</span> disableOtaDexopt = SystemProperties.getBoolean(<span class="string">"config.disable_otadexopt"</span>,</span><br><span class="line">                <span class="keyword">false</span>);</span><br><span class="line">        <span class="keyword">if</span> (!disableOtaDexopt) &#123;</span><br><span class="line">            t.traceBegin(<span class="string">"StartOtaDexOptService"</span>);</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                Watchdog.getInstance().pauseWatchingCurrentThread(<span class="string">"moveab"</span>);</span><br><span class="line">                OtaDexoptService.main(mSystemContext, mPackageManagerService);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable e) &#123;</span><br><span class="line">                reportWtf(<span class="string">"starting OtaDexOptService"</span>, e);</span><br><span class="line">            &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                Watchdog.getInstance().resumeWatchingCurrentThread(<span class="string">"moveab"</span>);</span><br><span class="line">                t.traceEnd();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    t.traceBegin(<span class="string">"StartUserManagerService"</span>);</span><br><span class="line">    mSystemServiceManager.startService(UserManagerService.LifeCycle<span class="class">.<span class="keyword">class</span>)</span>;</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Initialize attribute cache used to cache resources from packages.</span></span><br><span class="line">    t.traceBegin(<span class="string">"InitAttributerCache"</span>);</span><br><span class="line">    AttributeCache.init(mSystemContext);</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Set up the Application instance for the system process and get started.</span></span><br><span class="line">    t.traceBegin(<span class="string">"SetSystemProcess"</span>);</span><br><span class="line">    mActivityManagerService.setSystemProcess();</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Complete the watchdog setup with an ActivityManager instance and listen for reboots</span></span><br><span class="line">    <span class="comment">// Do this only after the ActivityManagerService is properly started as a system process</span></span><br><span class="line">    t.traceBegin(<span class="string">"InitWatchdog"</span>);</span><br><span class="line">    watchdog.init(mSystemContext, mActivityManagerService);</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// DisplayManagerService needs to setup android.display scheduling related policies</span></span><br><span class="line">    <span class="comment">// since setSystemProcess() would have overridden policies due to setProcessGroup</span></span><br><span class="line">    mDisplayManagerService.setupSchedulerPolicies();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// Manages Overlay packages</span></span><br><span class="line">    t.traceBegin(<span class="string">"StartOverlayManagerService"</span>);</span><br><span class="line">    mSystemServiceManager.startService(<span class="keyword">new</span> OverlayManagerService(mSystemContext));</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    t.traceBegin(<span class="string">"StartSensorPrivacyService"</span>);</span><br><span class="line">    mSystemServiceManager.startService(<span class="keyword">new</span> SensorPrivacyService(mSystemContext));</span><br><span class="line">    t.traceEnd();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (SystemProperties.getInt(<span class="string">"persist.sys.displayinset.top"</span>, <span class="number">0</span>) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">// DisplayManager needs the overlay immediately.</span></span><br><span class="line">        mActivityManagerService.updateSystemUiContext();</span><br><span class="line">        LocalServices.getService(DisplayManagerInternal<span class="class">.<span class="keyword">class</span>).<span class="title">onOverlayChanged</span>()</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// The sensor service needs access to package manager service, app ops</span></span><br><span class="line">    <span class="comment">// service, and permissions service, therefore we start it after them.</span></span><br><span class="line">    <span class="comment">// Start sensor service in a separate thread. Completion should be checked</span></span><br><span class="line">    <span class="comment">// before using it.</span></span><br><span class="line">    mSensorServiceStart = SystemServerInitThreadPool.submit(() -&gt; &#123;</span><br><span class="line">        TimingsTraceAndSlog traceLog = TimingsTraceAndSlog.newAsyncLog();</span><br><span class="line">        traceLog.traceBegin(START_SENSOR_SERVICE);</span><br><span class="line">        startSensorService();</span><br><span class="line">        traceLog.traceEnd();</span><br><span class="line">    &#125;, START_SENSOR_SERVICE);</span><br><span class="line"></span><br><span class="line">    t.traceEnd(); <span class="comment">// startBootstrapServices</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="PackageManagerService-main"><a href="#PackageManagerService-main" class="headerlink" title="PackageManagerService#main()"></a>PackageManagerService#main()</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// com.android.server.pm.PackageManagerService#main</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> PackageManagerService <span class="title">main</span><span class="params">(Context context, Installer installer,</span></span></span><br><span class="line"><span class="function"><span class="params">        <span class="keyword">boolean</span> factoryTest, <span class="keyword">boolean</span> onlyCore)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// Self-check for initial settings.</span></span><br><span class="line">    PackageManagerServiceCompilerMapping.checkProperties();</span><br><span class="line">    <span class="keyword">final</span> TimingsTraceAndSlog t = <span class="keyword">new</span> TimingsTraceAndSlog(TAG + <span class="string">"Timing"</span>,</span><br><span class="line">            Trace.TRACE_TAG_PACKAGE_MANAGER);</span><br><span class="line">    t.traceBegin(<span class="string">"create package manager"</span>);</span><br><span class="line">    <span class="keyword">final</span> Object lock = <span class="keyword">new</span> Object();</span><br><span class="line">    <span class="keyword">final</span> Object installLock = <span class="keyword">new</span> Object();</span><br><span class="line"></span><br><span class="line">    Injector injector = <span class="keyword">new</span> Injector(</span><br><span class="line">            context, lock, installer, installLock, <span class="keyword">new</span> PackageAbiHelperImpl(),</span><br><span class="line">            (i, pm) -&gt;</span><br><span class="line">                    <span class="keyword">new</span> ComponentResolver(i.getUserManagerService(), pm.mPmInternal, lock),</span><br><span class="line">            (i, pm) -&gt;</span><br><span class="line">                    PermissionManagerService.create(context, lock),</span><br><span class="line">            (i, pm) -&gt;</span><br><span class="line">                    <span class="keyword">new</span> UserManagerService(context, pm,</span><br><span class="line">                            <span class="keyword">new</span> UserDataPreparer(installer, installLock, context, onlyCore),</span><br><span class="line">                            lock),</span><br><span class="line">            (i, pm) -&gt;</span><br><span class="line">                    <span class="keyword">new</span> Settings(Environment.getDataDirectory(),</span><br><span class="line">                            i.getPermissionManagerServiceInternal().getPermissionSettings(),</span><br><span class="line">                            lock),</span><br><span class="line">            <span class="keyword">new</span> Injector.LocalServicesProducer&lt;&gt;(ActivityTaskManagerInternal<span class="class">.<span class="keyword">class</span>),</span></span><br><span class="line"><span class="class">            <span class="title">new</span> <span class="title">Injector</span>.<span class="title">LocalServicesProducer</span>&lt;&gt;(<span class="title">ActivityManagerInternal</span>.<span class="title">class</span>),</span></span><br><span class="line"><span class="class">            <span class="title">new</span> <span class="title">Injector</span>.<span class="title">LocalServicesProducer</span>&lt;&gt;(<span class="title">DeviceIdleInternal</span>.<span class="title">class</span>),</span></span><br><span class="line"><span class="class">            <span class="title">new</span> <span class="title">Injector</span>.<span class="title">LocalServicesProducer</span>&lt;&gt;(<span class="title">StorageManagerInternal</span>.<span class="title">class</span>),</span></span><br><span class="line"><span class="class">            <span class="title">new</span> <span class="title">Injector</span>.<span class="title">LocalServicesProducer</span>&lt;&gt;(<span class="title">NetworkPolicyManagerInternal</span>.<span class="title">class</span>),</span></span><br><span class="line"><span class="class">            <span class="title">new</span> <span class="title">Injector</span>.<span class="title">LocalServicesProducer</span>&lt;&gt;(<span class="title">PermissionPolicyInternal</span>.<span class="title">class</span>),</span></span><br><span class="line"><span class="class">            <span class="title">new</span> <span class="title">Injector</span>.<span class="title">LocalServicesProducer</span>&lt;&gt;(<span class="title">DeviceStorageMonitorInternal</span>.<span class="title">class</span>),</span></span><br><span class="line"><span class="class">            <span class="title">new</span> <span class="title">Injector</span>.<span class="title">SystemServiceProducer</span>&lt;&gt;(<span class="title">DisplayManager</span>.<span class="title">class</span>),</span></span><br><span class="line"><span class="class">            <span class="title">new</span> <span class="title">Injector</span>.<span class="title">SystemServiceProducer</span>&lt;&gt;(<span class="title">StorageManager</span>.<span class="title">class</span>),</span></span><br><span class="line"><span class="class">            <span class="title">new</span> <span class="title">Injector</span>.<span class="title">SystemServiceProducer</span>&lt;&gt;(<span class="title">AppOpsManager</span>.<span class="title">class</span>),</span></span><br><span class="line"><span class="class">            (<span class="title">i</span>, <span class="title">pm</span>) -&gt; <span class="title">AppsFilter</span>.<span class="title">create</span>(<span class="title">pm</span>.<span class="title">mPmInternal</span>, <span class="title">i</span>),</span></span><br><span class="line">            (i, pm) -&gt; (PlatformCompat) ServiceManager.getService("platform_compat"));</span><br><span class="line"></span><br><span class="line">    PackageManagerService m = <span class="keyword">new</span> PackageManagerService(injector, onlyCore, factoryTest);</span><br><span class="line">    t.traceEnd(); <span class="comment">// "create package manager"</span></span><br><span class="line"></span><br><span class="line">    injector.getCompatibility().registerListener(SELinuxMMAC.SELINUX_LATEST_CHANGES,</span><br><span class="line">            packageName -&gt; &#123;</span><br><span class="line">                <span class="keyword">synchronized</span> (m.mInstallLock) &#123;</span><br><span class="line">                    <span class="keyword">final</span> AndroidPackage pkg;</span><br><span class="line">                    <span class="keyword">final</span> PackageSetting ps;</span><br><span class="line">                    <span class="keyword">final</span> SharedUserSetting sharedUser;</span><br><span class="line">                    <span class="keyword">final</span> String oldSeInfo;</span><br><span class="line">                    <span class="keyword">synchronized</span> (m.mLock) &#123;</span><br><span class="line">                        ps = m.mSettings.getPackageLPr(packageName);</span><br><span class="line">                        <span class="keyword">if</span> (ps == <span class="keyword">null</span>) &#123;</span><br><span class="line">                            Slog.e(TAG, <span class="string">"Failed to find package setting"</span> + packageName);</span><br><span class="line">                            <span class="keyword">return</span>;</span><br><span class="line">                        &#125;</span><br><span class="line">                        pkg = ps.pkg;</span><br><span class="line">                        sharedUser = ps.getSharedUser();</span><br><span class="line">                        oldSeInfo = AndroidPackageUtils.getSeInfo(pkg, ps);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (pkg == <span class="keyword">null</span>) &#123;</span><br><span class="line">                        Slog.e(TAG, <span class="string">"Failed to find package"</span> + packageName);</span><br><span class="line">                        <span class="keyword">return</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">final</span> String newSeInfo = SELinuxMMAC.getSeInfo(pkg, sharedUser,</span><br><span class="line">                            m.mInjector.getCompatibility());</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (!newSeInfo.equals(oldSeInfo)) &#123;</span><br><span class="line">                        Slog.i(TAG, <span class="string">"Updating seInfo for package"</span> + packageName + <span class="string">"from:"</span></span><br><span class="line">                                + oldSeInfo + <span class="string">"to:"</span> + newSeInfo);</span><br><span class="line">                        ps.getPkgState().setOverrideSeInfo(newSeInfo);</span><br><span class="line">                        m.prepareAppDataAfterInstallLIF(pkg);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">    m.installWhitelistedSystemPackages();</span><br><span class="line">    ServiceManager.addService(<span class="string">"package"</span>, m);</span><br><span class="line">    <span class="keyword">final</span> PackageManagerNative pmn = m.<span class="keyword">new</span> PackageManagerNative();</span><br><span class="line">    ServiceManager.addService(<span class="string">"package_native"</span>, pmn);</span><br><span class="line">    <span class="keyword">return</span> m;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="BOOT-PROGRESS-PMS-START"><a href="#BOOT-PROGRESS-PMS-START" class="headerlink" title="BOOT_PROGRESS_PMS_START"></a>BOOT_PROGRESS_PMS_START</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="BOOT-PROGRESS-PMS-SYSTEM-SCAN-START"><a href="#BOOT-PROGRESS-PMS-SYSTEM-SCAN-START" class="headerlink" title="BOOT_PROGRESS_PMS_SYSTEM_SCAN_START"></a>BOOT_PROGRESS_PMS_SYSTEM_SCAN_START</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="BOOT-PROGRESS-PMS-DATAS-SCAN-START"><a href="#BOOT-PROGRESS-PMS-DATAS-SCAN-START" class="headerlink" title="BOOT_PROGRESS_PMS_DATAS_SCAN_START"></a>BOOT_PROGRESS_PMS_DATAS_SCAN_START</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="BOOT-PROGRESS-PMS-SCAN-END"><a href="#BOOT-PROGRESS-PMS-SCAN-END" class="headerlink" title="BOOT_PROGRESS_PMS_SCAN_END"></a>BOOT_PROGRESS_PMS_SCAN_END</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="BOOT-PROGRESS-PMS-READY"><a href="#BOOT-PROGRESS-PMS-READY" class="headerlink" title="BOOT_PROGRESS_PMS_READY"></a>BOOT_PROGRESS_PMS_READY</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="PackageInstaller åˆ›å»º"><a href="#PackageInstaller åˆ›å»º" class="headerlink" title="PackageInstaller åˆ›å»º"></a>PackageInstaller åˆ›å»º </h2><p>PMS çš„ä½œç”¨æ˜¯å¯¹ APK è¿›è¡Œå®‰è£…ã€è§£æã€åˆ é™¤ä»¥åŠå¸è½½ç­‰ï¼Œé‚£ä¹ˆè¿™é‡Œä»¥å®‰è£… APK ä¸ºä¾‹å­åˆ†æï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ä»åº”ç”¨å®‰è£…å™¨ PackageInstaller åˆ° PMS å¤„ç† APK å®‰è£…çš„æµç¨‹ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="PackageInstaller å®‰è£… APK"><a href="#PackageInstaller å®‰è£… APK" class="headerlink" title="PackageInstaller å®‰è£… APK"></a>PackageInstaller å®‰è£… APK</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="PMS å¤„ç† APK"><a href="#PMS å¤„ç† APK" class="headerlink" title="PMS å¤„ç† APK"></a>PMS å¤„ç† APK</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="PackageParser è§£æ APK"><a href="#PackageParser è§£æ APK" class="headerlink" title="PackageParser è§£æ APK"></a>PackageParser è§£æ APK</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="æµç¨‹æ€»ç»“"><a href="# æµç¨‹æ€»ç»“" class="headerlink" title="æµç¨‹æ€»ç»“"></a> æµç¨‹æ€»ç»“ </h2>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/05/28/%E5%89%91%E6%8C%87-Offer-45-%E6%8A%8A%E6%95%B0%E7%BB%84%E6%8E%92%E6%88%90%E6%9C%80%E5%B0%8F%E7%9A%84%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="cloud">
      <meta itemprop="description" content="Less is more.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="cloud's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/28/%E5%89%91%E6%8C%87-Offer-45-%E6%8A%8A%E6%95%B0%E7%BB%84%E6%8E%92%E6%88%90%E6%9C%80%E5%B0%8F%E7%9A%84%E6%95%B0/" class="post-title-link" itemprop="url">å‰‘æŒ‡ -Offer-45- æŠŠæ•°ç»„æ’æˆæœ€å°çš„æ•°</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-05-28 16:24:16 / Modified: 16:27:31" itemprop="dateCreated datePublished" datetime="2021-05-28T16:24:16+08:00">2021-05-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%91%E6%8C%87Offer/" itemprop="url" rel="index"><span itemprop="name">å‰‘æŒ‡Offer</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.9k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; è¾“å…¥ä¸€ä¸ªéè´Ÿæ•´æ•°æ•°ç»„ï¼ŒæŠŠæ•°ç»„é‡Œæ‰€æœ‰æ•°å­—æ‹¼æ¥èµ·æ¥æ’æˆä¸€ä¸ªæ•°ï¼Œæ‰“å°èƒ½æ‹¼æ¥å‡ºçš„æ‰€æœ‰æ•°å­—ä¸­æœ€å°çš„ä¸€ä¸ªã€‚ </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹ 1: </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¾“å…¥: [10,2]</span><br><span class="line">&#x2F;&#x2F; è¾“å‡º: &quot;102&quot; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹ 2: </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¾“å…¥: [3,30,34,5,9]</span><br><span class="line">&#x2F;&#x2F; è¾“å‡º: &quot;3033459&quot; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; æç¤º: </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F; 0 &lt; nums.length &lt;&#x3D; 100 </span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¯´æ˜: </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F; è¾“å‡ºç»“æœå¯èƒ½éå¸¸å¤§ï¼Œæ‰€ä»¥ä½ éœ€è¦è¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²è€Œä¸æ˜¯æ•´æ•° </span><br><span class="line">&#x2F;&#x2F; æ‹¼æ¥èµ·æ¥çš„æ•°å­—å¯èƒ½ä¼šæœ‰å‰å¯¼ 0ï¼Œæœ€åç»“æœä¸éœ€è¦å»æ‰å‰å¯¼ 0 </span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F; Related Topics æ’åº </span><br><span class="line">&#x2F;&#x2F; ğŸ‘ 225 ğŸ‘ 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region begin(Prohibit modification and deletion)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region end(Prohibit modification and deletion)</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">minNumber</span><span class="params">(<span class="keyword">int</span>[] nums)</span> </span>&#123;</span><br><span class="line">        String[] strings = <span class="keyword">new</span> String[nums.length];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; nums.length; i++) &#123;</span><br><span class="line">            strings[i] = String.valueOf(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        quickSort(strings, <span class="number">0</span>, nums.length - <span class="number">1</span>);</span><br><span class="line">        StringBuilder builder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        <span class="keyword">for</span> (String s : strings) &#123;</span><br><span class="line">            builder.append(s);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> builder.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">quickSort</span><span class="params">(String[] strings, <span class="keyword">int</span> start, <span class="keyword">int</span> end)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (start &gt;= end) <span class="keyword">return</span>;</span><br><span class="line">        <span class="keyword">int</span> low = start, high = end;</span><br><span class="line">        String anchor = strings[start];</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (low &lt; high) &#123;</span><br><span class="line">            <span class="keyword">while</span> ((strings[high] + strings[start]).compareTo(strings[start] + strings[high]) &gt;= <span class="number">0</span> &amp;&amp; low &lt; high) high--;</span><br><span class="line">            <span class="keyword">while</span> ((strings[low] + strings[start]).compareTo(strings[start] + strings[low]) &lt;= <span class="number">0</span> &amp;&amp; low &lt; high) low++;</span><br><span class="line">            anchor = strings[low];</span><br><span class="line">            strings[low] = strings[high];</span><br><span class="line">            strings[high] = anchor;</span><br><span class="line">        &#125;</span><br><span class="line">        strings[low] = strings[start];</span><br><span class="line">        strings[start] = anchor;</span><br><span class="line">        <span class="comment">// æ­¤æ—¶ low == high</span></span><br><span class="line">        quickSort(strings, start, low - <span class="number">1</span>);</span><br><span class="line">        quickSort(strings, high + <span class="number">1</span>, end);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<pre><code> æ‰§è¡Œè€—æ—¶:5 ms, å‡»è´¥äº† 97.21% çš„ Java ç”¨æˆ·
å†…å­˜æ¶ˆè€—:37.8 MB, å‡»è´¥äº† 86.94% çš„ Java ç”¨æˆ· </code></pre><ul>
<li><strong> æ—¶é—´å¤æ‚åº¦ O(NlogN)  ï¼š</strong> <em>N</em> ä¸ºæœ€ç»ˆè¿”å›å€¼çš„å­—ç¬¦æ•°é‡ï¼ˆ <em>strs</em> åˆ—è¡¨çš„é•¿åº¦ &lt;= N ï¼‰ï¼›ä½¿ç”¨å¿«æ’æˆ–å†…ç½®å‡½æ•°çš„å¹³å‡æ—¶é—´å¤æ‚åº¦ä¸º O(NlogN)  ï¼Œæœ€å·®ä¸º <em>O(N^2)</em> ã€‚</li>
<li><strong> ç©ºé—´å¤æ‚åº¦ <em>O(N)</em> ï¼š</strong> å­—ç¬¦ä¸²åˆ—è¡¨ <em>strs</em> å ç”¨çº¿æ€§å¤§å°çš„é¢å¤–ç©ºé—´ã€‚</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/05/28/%E5%89%91%E6%8C%87-Offer-44-%E6%95%B0%E5%AD%97%E5%BA%8F%E5%88%97%E4%B8%AD%E6%9F%90%E4%B8%80%E4%BD%8D%E7%9A%84%E6%95%B0%E5%AD%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="cloud">
      <meta itemprop="description" content="Less is more.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="cloud's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/28/%E5%89%91%E6%8C%87-Offer-44-%E6%95%B0%E5%AD%97%E5%BA%8F%E5%88%97%E4%B8%AD%E6%9F%90%E4%B8%80%E4%BD%8D%E7%9A%84%E6%95%B0%E5%AD%97/" class="post-title-link" itemprop="url">å‰‘æŒ‡ -Offer-44- æ•°å­—åºåˆ—ä¸­æŸä¸€ä½çš„æ•°å­—</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-05-28 11:03:25 / Modified: 11:18:58" itemprop="dateCreated datePublished" datetime="2021-05-28T11:03:25+08:00">2021-05-28</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%91%E6%8C%87Offer/" itemprop="url" rel="index"><span itemprop="name">å‰‘æŒ‡Offer</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>1.4k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>1 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; æ•°å­—ä»¥ 0123456789101112131415â€¦çš„æ ¼å¼åºåˆ—åŒ–åˆ°ä¸€ä¸ªå­—ç¬¦åºåˆ—ä¸­ã€‚åœ¨è¿™ä¸ªåºåˆ—ä¸­ï¼Œç¬¬ 5 ä½ï¼ˆä»ä¸‹æ ‡ 0 å¼€å§‹è®¡æ•°ï¼‰æ˜¯ 5ï¼Œç¬¬ 13 ä½æ˜¯ 1ï¼Œç¬¬ 19 ä½æ˜¯ 4ï¼Œ</span><br><span class="line">&#x2F;&#x2F; ç­‰ç­‰ã€‚ </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¯·å†™ä¸€ä¸ªå‡½æ•°ï¼Œæ±‚ä»»æ„ç¬¬ n ä½å¯¹åº”çš„æ•°å­—ã€‚ </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹ 1ï¼š </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¾“å…¥ï¼šn &#x3D; 3</span><br><span class="line">&#x2F;&#x2F; è¾“å‡ºï¼š3</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹ 2ï¼š </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¾“å…¥ï¼šn &#x3D; 11</span><br><span class="line">&#x2F;&#x2F; è¾“å‡ºï¼š0 </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; é™åˆ¶ï¼š </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F; 0 &lt;&#x3D; n &lt; 2^31 </span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 400 é¢˜ç›¸åŒï¼šhttps:&#x2F;&#x2F;leetcode-cn.com&#x2F;problems&#x2F;nth-digit&#x2F; </span><br><span class="line">&#x2F;&#x2F; Related Topics æ•°å­¦ </span><br><span class="line">&#x2F;&#x2F; ğŸ‘ 128 ğŸ‘ 0</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region begin(Prohibit modification and deletion)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region end(Prohibit modification and deletion)</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findNthDigit</span><span class="params">(<span class="keyword">int</span> n)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> digit = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> start = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">long</span> count = <span class="number">9</span>;</span><br><span class="line">        <span class="comment">// 1. ç¡®å®šæ‰€æ±‚æ•°ä½çš„æ‰€åœ¨æ•°å­—çš„ä½æ•° </span></span><br><span class="line">        <span class="keyword">while</span> (n &gt; count) &#123;</span><br><span class="line">            n -= count;</span><br><span class="line">            digit++;</span><br><span class="line">            start *= <span class="number">10</span>;</span><br><span class="line">            count = <span class="number">9</span> * digit * start;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 2. ç¡®å®šæ‰€æ±‚æ•°ä½æ‰€åœ¨çš„æ•°å­— </span></span><br><span class="line">        <span class="keyword">long</span> num = start + (n - <span class="number">1</span>) / digit;</span><br><span class="line">        <span class="comment">// 3. ç¡®å®šæ‰€æ±‚æ•°ä½åœ¨ num çš„å“ªä¸€æ•°ä½ </span></span><br><span class="line">        <span class="comment">// ASCII - 0 = çœŸå®å€¼ </span></span><br><span class="line">        <span class="keyword">return</span> Long.toString(num).charAt((n - <span class="number">1</span>) % digit) - <span class="string">'0'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code> æ‰§è¡Œè€—æ—¶:0 ms, å‡»è´¥äº† 100.00% çš„ Java ç”¨æˆ·
å†…å­˜æ¶ˆè€—:35.3 MB, å‡»è´¥äº† 32.53% çš„ Java ç”¨æˆ· </code></pre><ul>
<li><strong> æ—¶é—´å¤æ‚åº¦ O(logN)  ï¼š</strong> æ‰€æ±‚æ•°ä½ <em>n</em> å¯¹åº”æ•°å­— <em>num</em> çš„ä½æ•° <em>digit</em> æœ€å¤§ä¸º O(logN)  ï¼›ç¬¬ä¸€æ­¥æœ€å¤šå¾ªç¯ O(logN)  æ¬¡ï¼›ç¬¬ä¸‰æ­¥ä¸­å°† <em>num</em> è½¬åŒ–ä¸ºå­—ç¬¦ä¸²ä½¿ç”¨ O(logN)  æ—¶é—´ï¼›å› æ­¤æ€»ä½“ä¸º O(logN)  ã€‚ </li>
<li><strong> ç©ºé—´å¤æ‚åº¦ O(logN)  ï¼š</strong> å°†æ•°å­— <em>num</em> è½¬åŒ–ä¸ºå­—ç¬¦ä¸² <code>str(num)</code> ï¼Œå ç”¨ O(logN)  çš„é¢å¤–ç©ºé—´ã€‚</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/05/14/%E5%89%91%E6%8C%87-Offer-38-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%8E%92%E5%88%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="cloud">
      <meta itemprop="description" content="Less is more.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="cloud's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/14/%E5%89%91%E6%8C%87-Offer-38-%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%8E%92%E5%88%97/" class="post-title-link" itemprop="url">å‰‘æŒ‡ -Offer-38- å­—ç¬¦ä¸²çš„æ’åˆ—</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-05-14 16:44:10 / Modified: 17:47:49" itemprop="dateCreated datePublished" datetime="2021-05-14T16:44:10+08:00">2021-05-14</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%91%E6%8C%87Offer/" itemprop="url" rel="index"><span itemprop="name">å‰‘æŒ‡Offer</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>2k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; è¾“å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œæ‰“å°å‡ºè¯¥å­—ç¬¦ä¸²ä¸­å­—ç¬¦çš„æ‰€æœ‰æ’åˆ—ã€‚ </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ä½ å¯ä»¥ä»¥ä»»æ„é¡ºåºè¿”å›è¿™ä¸ªå­—ç¬¦ä¸²æ•°ç»„ï¼Œä½†é‡Œé¢ä¸èƒ½æœ‰é‡å¤å…ƒç´ ã€‚ </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹: </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¾“å…¥ï¼šs &#x3D; &quot;abc&quot;</span><br><span class="line">&#x2F;&#x2F; è¾“å‡ºï¼š[&quot;abc&quot;,&quot;acb&quot;,&quot;bac&quot;,&quot;bca&quot;,&quot;cab&quot;,&quot;cba&quot;]</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; é™åˆ¶ï¼š </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; 1 &lt;&#x3D; s çš„é•¿åº¦ &lt;&#x3D; 8 </span><br><span class="line">&#x2F;&#x2F; Related Topics å›æº¯ç®—æ³• </span><br><span class="line">&#x2F;&#x2F; ğŸ‘ 266 ğŸ‘ 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region begin(Prohibit modification and deletion)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region end(Prohibit modification and deletion)</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String[] permutation(String s) &#123;</span><br><span class="line">        <span class="comment">// ç»“æœé›†åˆã€‚è¿™é‡Œä¹‹æ‰€æœ‰ç”¨ set ä¸ç”¨ list</span></span><br><span class="line">        <span class="comment">// ä¸»è¦åŸå› æ˜¯ä½¿ç”¨ set å¯ä»¥ä¸»åŠ¨å»é‡ï¼Œé¿å…ä½¿ç”¨ list æ¯æ¬¡åˆ¤æ–­æ˜¯å¦å­˜åœ¨æŸä¸ªå…ƒç´  </span></span><br><span class="line">        <span class="comment">// å…¶æ¬¡é¢˜ç›®ä¸è¦æ±‚é¡ºåº </span></span><br><span class="line">        Set&lt;String&gt; res = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">        <span class="comment">// è®¿é—®è®°å½•ï¼Œä¾¿äºè¿‡æ»¤é€‰æ‹©ï¼Œåšå‰ªæä½¿ç”¨ã€‚</span></span><br><span class="line">        <span class="keyword">boolean</span>[] visited = <span class="keyword">new</span> <span class="keyword">boolean</span>[s.length()];</span><br><span class="line">        <span class="comment">// å¼€å§‹éå† </span></span><br><span class="line">        backtrack(s.toCharArray(), <span class="string">""</span>, res, visited);</span><br><span class="line">        <span class="comment">// å°†ç»“æœä¿®æ”¹è¿”å›æ ¼å¼ </span></span><br><span class="line">        String[] realRes = <span class="keyword">new</span> String[res.size()];</span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (String value : res) &#123;</span><br><span class="line">            realRes[i] = value;</span><br><span class="line">            i++;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> realRes;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">      *</span></span><br><span class="line"><span class="comment">      * <span class="doctag">@param</span> chars é¢˜ç›®ç»™çš„å‚æ•° </span></span><br><span class="line"><span class="comment">      * <span class="doctag">@param</span> path å½“å‰é€‰æ‹©çš„å­—ç¬¦ä¸² </span></span><br><span class="line"><span class="comment">      * <span class="doctag">@param</span> res å·²ç»é€‰å¥½çš„å­—ç¬¦ä¸²é›†åˆ </span></span><br><span class="line"><span class="comment">      * <span class="doctag">@param</span> visited è®¿é—®è®°å½• </span></span><br><span class="line"><span class="comment">      * </span></span><br><span class="line"><span class="comment">    **/</span></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">backtrack</span><span class="params">(<span class="keyword">char</span>[] chars, String path, Set&lt;String&gt; res, <span class="keyword">boolean</span>[] visited)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// ç»“æŸæ¡ä»¶ï¼Œå¦‚æœå½“å‰é€‰æ‹©å­—ç¬¦ä¸²å’Œé¢˜ç›®ç»™å®šå­—ç¬¦ä¸²çš„é•¿åº¦ä¸€è‡´åˆ™ç»“æŸ </span></span><br><span class="line">        <span class="keyword">if</span> (path.length() == chars.length) &#123;</span><br><span class="line">            res.add(path);</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// éå†æ‰€æœ‰å¯ä»¥é€‰æ‹©çš„æ¡ä»¶ </span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; chars.length; i++) &#123;</span><br><span class="line">            <span class="comment">// è¿‡æ»¤æ‰å·²ç»é€‰æ‹©çš„ </span></span><br><span class="line">            <span class="keyword">if</span> (visited[i]) <span class="keyword">continue</span>;</span><br><span class="line">            <span class="comment">// å½“å‰é€‰æ‹© </span></span><br><span class="line">            visited[i] = <span class="keyword">true</span>;</span><br><span class="line">            <span class="comment">// é€’å½’è¿›å…¥ä¸‹ä¸€å±‚ </span></span><br><span class="line">            <span class="comment">// éœ€è¦æ³¨æ„ path è¿™é‡Œä¹Ÿæ˜¯åšäº†é€‰æ‹©å’Œå›é€€é€‰æ‹©ï¼Œå› ä¸ºæ˜¯ç›´æ¥ path + chars[i]ï¼Œç­‰é€’å½’ç»“æŸä¹‹å path è¿˜æ˜¯ pathï¼Œé»˜è®¤ä¹Ÿå°±åšäº†å›é€€ï¼Œæ¯”è¾ƒå–å·§ </span></span><br><span class="line">            backtrack(chars, path + chars[i], res, visited);</span><br><span class="line">            <span class="comment">// å›é€€é€‰æ‹© </span></span><br><span class="line">            visited[i] = <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p><strong> æ—¶é—´å¤æ‚åº¦ <em>O(N!N)</em> ï¼š</strong> <em>N</em> ä¸ºå­—ç¬¦ä¸² <code>s</code> çš„é•¿åº¦ï¼›æ—¶é—´å¤æ‚åº¦å’Œå­—ç¬¦ä¸²æ’åˆ—çš„æ–¹æ¡ˆæ•°æˆçº¿æ€§å…³ç³»ï¼Œå³å¤æ‚åº¦ä¸º <em>O(N!)</em> ï¼›å­—ç¬¦ä¸²æ‹¼æ¥æ“ä½œ <code>path + chars[i]</code> ä½¿ç”¨ <em>O(N)</em> ï¼›å› æ­¤æ€»ä½“æ—¶é—´å¤æ‚åº¦ä¸º <em>O(N!N)</em> ã€‚</p>
</li>
<li><p><strong> ç©ºé—´å¤æ‚åº¦ <em>O(N^2)</em> ï¼š</strong> å…¨æ’åˆ—çš„é€’å½’æ·±åº¦ä¸º <em>N</em> ï¼Œç³»ç»Ÿç´¯è®¡ä½¿ç”¨æ ˆç©ºé—´å¤§å°ä¸º <em>O(N)</em> ï¼›é€’å½’ä¸­è¾…åŠ© Set ç´¯è®¡å­˜å‚¨çš„å­—ç¬¦æ•°é‡æœ€å¤šä¸º <em>N + (N-1) + â€¦ + 2 + 1 = (N+1)N/2</em> ï¼Œå³å ç”¨ <em>O(N^2)</em> çš„é¢å¤–ç©ºé—´ã€‚</p>
<p>  æ‰§è¡Œè€—æ—¶:56 ms, å‡»è´¥äº† 16.96% çš„ Java ç”¨æˆ· <br>  å†…å­˜æ¶ˆè€—:44.4 MB, å‡»è´¥äº† 14.26% çš„ Java ç”¨æˆ· </p>
</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/05/08/%E5%89%91%E6%8C%87-Offer-34-%E4%BA%8C%E5%8F%89%E6%A0%91%E4%B8%AD%E5%92%8C%E4%B8%BA%E6%9F%90%E4%B8%80%E5%80%BC%E7%9A%84%E8%B7%AF%E5%BE%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="cloud">
      <meta itemprop="description" content="Less is more.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="cloud's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/08/%E5%89%91%E6%8C%87-Offer-34-%E4%BA%8C%E5%8F%89%E6%A0%91%E4%B8%AD%E5%92%8C%E4%B8%BA%E6%9F%90%E4%B8%80%E5%80%BC%E7%9A%84%E8%B7%AF%E5%BE%84/" class="post-title-link" itemprop="url">å‰‘æŒ‡ -Offer-34- äºŒå‰æ ‘ä¸­å’Œä¸ºæŸä¸€å€¼çš„è·¯å¾„</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>

              <time title="Created: 2021-05-08 17:13:52" itemprop="dateCreated datePublished" datetime="2021-05-08T17:13:52+08:00">2021-05-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">Edited on</span>
                <time title="Modified: 2021-05-09 22:05:27" itemprop="dateModified" datetime="2021-05-09T22:05:27+08:00">2021-05-09</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%91%E6%8C%87Offer/" itemprop="url" rel="index"><span itemprop="name">å‰‘æŒ‡Offer</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>2.5k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; è¾“å…¥ä¸€æ£µäºŒå‰æ ‘å’Œä¸€ä¸ªæ•´æ•°ï¼Œæ‰“å°å‡ºäºŒå‰æ ‘ä¸­èŠ‚ç‚¹å€¼çš„å’Œä¸ºè¾“å…¥æ•´æ•°çš„æ‰€æœ‰è·¯å¾„ã€‚ä»æ ‘çš„æ ¹èŠ‚ç‚¹å¼€å§‹å¾€ä¸‹ä¸€ç›´åˆ°å¶èŠ‚ç‚¹æ‰€ç»è¿‡çš„èŠ‚ç‚¹å½¢æˆä¸€æ¡è·¯å¾„ã€‚ </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹: </span><br><span class="line">&#x2F;&#x2F; ç»™å®šå¦‚ä¸‹äºŒå‰æ ‘ï¼Œä»¥åŠç›®æ ‡å’Œ target &#x3D; 22ï¼Œ </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;              5</span><br><span class="line">&#x2F;&#x2F;             &#x2F; \</span><br><span class="line">&#x2F;&#x2F;            4   8</span><br><span class="line">&#x2F;&#x2F;           &#x2F;   &#x2F; \</span><br><span class="line">&#x2F;&#x2F;          11  13  4</span><br><span class="line">&#x2F;&#x2F;         &#x2F;  \    &#x2F; \</span><br><span class="line">&#x2F;&#x2F;        7    2  5   1</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¿”å›: </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;[</span><br><span class="line">&#x2F;&#x2F;   [5,4,11,2],</span><br><span class="line">&#x2F;&#x2F;   [5,8,4,5]</span><br><span class="line">&#x2F;&#x2F;]</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; æç¤ºï¼š </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F; èŠ‚ç‚¹æ€»æ•° &lt;&#x3D; 10000 </span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 113 é¢˜ç›¸åŒï¼šhttps:&#x2F;&#x2F;leetcode-cn.com&#x2F;problems&#x2F;path-sum-ii&#x2F; </span><br><span class="line">&#x2F;&#x2F; Related Topics æ ‘ æ·±åº¦ä¼˜å…ˆæœç´¢ </span><br><span class="line">&#x2F;&#x2F; ğŸ‘ 173 ğŸ‘ 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region begin(Prohibit modification and deletion)</span><br><span class="line"></span><br><span class="line">&#x2F;**</span><br><span class="line"> * Definition for a binary tree node.</span><br><span class="line"> * public class TreeNode &#123;</span><br><span class="line"> * int val;</span><br><span class="line"> * TreeNode left;</span><br><span class="line"> * TreeNode right;</span><br><span class="line"> * TreeNode() &#123;&#125;</span><br><span class="line"> * TreeNode(int val) &#123; this.val &#x3D; val; &#125;</span><br><span class="line"> * TreeNode(int val, TreeNode left, TreeNode right) &#123;</span><br><span class="line"> * this.val &#x3D; val;</span><br><span class="line"> * this.left &#x3D; left;</span><br><span class="line"> * this.right &#x3D; right;</span><br><span class="line"> * &#125;</span><br><span class="line"> * &#125;</span><br><span class="line"> *&#x2F;</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region end(Prohibit modification and deletion)</span><br></pre></td></tr></table></figure>

<p> å…ˆåºéå†ï¼ˆæ ¹ / å·¦ / å³ï¼‰ + è·¯å¾„è®°å½•ï¼ˆä¸æ»¡è¶³æ¡ä»¶æ—¶å›æº¯åˆ°ä¸Šä¸€ä¸ªèŠ‚ç‚¹ï¼‰</p>
<p> è¿™ä¸ªé¢˜ç›®çš„éœ€è¦æˆ‘ä»¬åšçš„æ˜¯åˆ¤æ–­é‚£ä¸€è·¯çš„èŠ‚ç‚¹ä¹‹å’Œç­‰äº targetï¼Œåœ¨å…ˆæ ¹éå†çš„è¿‡ç¨‹ä¸­ï¼Œä»ä¸Šè‡³ä¸‹ï¼Œç„¶ååˆä»ä¸‹é¢çš„èŠ‚ç‚¹å¼€å§‹è¿”å›ã€‚<br> æˆ‘ä»¬åªéœ€è¦ä»ç¬¬ä¸€ä¸ªèŠ‚ç‚¹å¼€å§‹ç´¯åŠ ï¼Œæ¯éå†ä¸€ä¸ªèŠ‚ç‚¹å°±å°±å°†è¿™ä¸ªèŠ‚ç‚¹åŠ åœ¨ list é›†åˆä¸­ï¼Œ<br> å½“ç´¯åŠ çš„ç»“æœç­‰äº target æ—¶ï¼Œå°±å¯ä»¥å°† list é›†åˆåŠ å…¥åˆ°æœ€ç»ˆçš„ç»“æœä¸­ï¼Œå¹¶ä¸”éœ€è¦å°† list é›†åˆä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ åˆ é™¤ï¼Œç„¶åå›æº¯åˆ°ä¸Šä¸€å±‚ï¼Œç»§ç»­éå†å…¶ä»–è·¯ã€‚<br> ä½†æ˜¯éå†åˆ°äº†æœ€åä¸€ä¸ªèŠ‚ç‚¹åï¼Œä¹Ÿå°±æ˜¯è¿™ä¸ªèŠ‚ç‚¹æ˜¯å¶å­èŠ‚ç‚¹æ—¶ï¼Œç´¯åŠ çš„å€¼è¿˜æ²¡æœ‰ç­‰äº targetï¼Œé‚£ä¹ˆå°±è¯æ˜è¿™æ¡è·¯è¡Œä¸é€šï¼Œéœ€è¦å¼€å§‹éå†å…¶ä»–è·¯ï¼Œæ­¤æ—¶éœ€è¦å°† list é›†åˆä¸­çš„æœ€åä¸€ä¸ªå…ƒç´ åˆ é™¤ï¼Œå› ä¸ºéœ€è¦å›æº¯ï¼Œå›æº¯åˆ°ä¸Šä¸€å±‚å list é›†åˆä¸­æœ€åä¸€ä¸ªå…ƒç´ å°±ä¸éœ€è¦äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    LinkedList&lt;List&lt;Integer&gt;&gt; result = <span class="keyword">new</span> LinkedList&lt;&gt;(); <span class="comment">// å£°æ˜ LinkedListï¼Œæ–¹ä¾¿ä½¿ç”¨ removeLast æ–¹æ³• </span></span><br><span class="line">    LinkedList&lt;Integer&gt; path = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;Integer&gt;&gt; pathSum(TreeNode root, <span class="keyword">int</span> target) &#123;</span><br><span class="line">        recur(root, target);</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">recur</span><span class="params">(TreeNode node, <span class="keyword">int</span> target)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (node == <span class="keyword">null</span>) <span class="keyword">return</span>;</span><br><span class="line">        path.add(node.val);</span><br><span class="line">        target -= node.val;</span><br><span class="line">        <span class="keyword">if</span> (target == <span class="number">0</span> &amp;&amp; node.left == <span class="keyword">null</span> &amp;&amp; node.right == <span class="keyword">null</span>) <span class="comment">// å½“ node ä¸ºå¶å­èŠ‚ç‚¹æ—¶ï¼Œä¸”è·¯å¾„ä¹‹å’Œæ»¡è¶³æ¡ä»¶ </span></span><br><span class="line">            result.add(<span class="keyword">new</span> LinkedList&lt;&gt;(path)); <span class="comment">// è¿™é‡Œé‡æ–°åˆ›å»ºäº†é›†åˆï¼Œæ·»åŠ è¿›å…¥ resultï¼Œé¿å… path ä¿®æ”¹æ—¶ï¼Œresult ä¸­çš„ path ä¹Ÿéšä¹‹æ”¹å˜ </span></span><br><span class="line">        recur(node.left, target); <span class="comment">// é€’å½’å·¦å­æ ‘ </span></span><br><span class="line">        recur(node.right, target); <span class="comment">// é€’å½’å³å­æ ‘ </span></span><br><span class="line">        path.removeLast(); <span class="comment">// å›æº¯è‡³ä¸Šä¸€çº§ </span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code> æ—¶é—´å¤æ‚åº¦ï¼šO(N), N ä¸ºäºŒå‰æ ‘çš„èŠ‚ç‚¹æ•°ï¼Œå…ˆåºéå†éœ€è¦éå†æ‰€æœ‰èŠ‚ç‚¹
ç©ºé—´å¤æ‚åº¦ï¼šO(N), æœ€å·®æƒ…å†µä¸‹ï¼Œå³æ ‘é€€åŒ–ä¸ºé“¾è¡¨æ—¶ï¼Œ`path` å­˜å‚¨æ‰€æœ‰æ ‘èŠ‚ç‚¹ï¼Œä½¿ç”¨ O(N) é¢å¤–ç©ºé—´ã€‚
æ‰§è¡Œè€—æ—¶:1 ms, å‡»è´¥äº† 100.00% çš„ Java ç”¨æˆ·
å†…å­˜æ¶ˆè€—:38.9 MB, å‡»è´¥äº† 40.71% çš„ Java ç”¨æˆ· </code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-Hans">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2021/05/08/%E5%89%91%E6%8C%87-Offer-33-%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%E5%BA%8F%E5%88%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.png">
      <meta itemprop="name" content="cloud">
      <meta itemprop="description" content="Less is more.">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="cloud's blog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/08/%E5%89%91%E6%8C%87-Offer-33-%E4%BA%8C%E5%8F%89%E6%90%9C%E7%B4%A2%E6%A0%91%E7%9A%84%E5%90%8E%E5%BA%8F%E9%81%8D%E5%8E%86%E5%BA%8F%E5%88%97/" class="post-title-link" itemprop="url">å‰‘æŒ‡ -Offer-33- äºŒå‰æœç´¢æ ‘çš„ååºéå†åºåˆ—</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2021-05-08 11:46:05 / Modified: 16:07:27" itemprop="dateCreated datePublished" datetime="2021-05-08T11:46:05+08:00">2021-05-08</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E5%89%91%E6%8C%87Offer/" itemprop="url" rel="index"><span itemprop="name">å‰‘æŒ‡Offer</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="Symbols count in article">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">Symbols count in article: </span>
              <span>2.3k</span>
            </span>
            <span class="post-meta-item" title="Reading time">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">Reading time &asymp;</span>
              <span>2 mins.</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; è¾“å…¥ä¸€ä¸ªæ•´æ•°æ•°ç»„ï¼Œåˆ¤æ–­è¯¥æ•°ç»„æ˜¯ä¸æ˜¯æŸäºŒå‰æœç´¢æ ‘çš„ååºéå†ç»“æœã€‚å¦‚æœæ˜¯åˆ™è¿”å› trueï¼Œå¦åˆ™è¿”å› falseã€‚å‡è®¾è¾“å…¥çš„æ•°ç»„çš„ä»»æ„ä¸¤ä¸ªæ•°å­—éƒ½äº’ä¸ç›¸åŒã€‚ </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; å‚è€ƒä»¥ä¸‹è¿™é¢—äºŒå‰æœç´¢æ ‘ï¼š </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F;      5</span><br><span class="line">&#x2F;&#x2F;    &#x2F; \</span><br><span class="line">&#x2F;&#x2F;   2   6</span><br><span class="line">&#x2F;&#x2F;  &#x2F; \</span><br><span class="line">&#x2F;&#x2F; 1   3 </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹ 1ï¼š </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¾“å…¥: [1,6,3,2,5]</span><br><span class="line">&#x2F;&#x2F; è¾“å‡º: false </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; ç¤ºä¾‹ 2ï¼š </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; è¾“å…¥: [1,3,2,6,5]</span><br><span class="line">&#x2F;&#x2F; è¾“å‡º: true </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; æç¤ºï¼š </span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F; æ•°ç»„é•¿åº¦ &lt;&#x3D; 1000 </span><br><span class="line">&#x2F;&#x2F; </span><br><span class="line">&#x2F;&#x2F; ğŸ‘ 256 ğŸ‘ 0</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region begin(Prohibit modification and deletion)</span><br><span class="line"></span><br><span class="line">&#x2F;&#x2F;leetcode submit region end(Prohibit modification and deletion)</span><br></pre></td></tr></table></figure>

<h3 id="é€’å½’"><a href="# é€’å½’" class="headerlink" title="é€’å½’"></a>é€’å½’ </h3><p> æ ¹æ®äºŒå‰æœç´¢æ ‘çš„å®šä¹‰ï¼Œå·¦å­æ ‘ä¸€å®šæ¯”æ ¹èŠ‚ç‚¹å°ï¼Œå³å­æ ‘ä¸€å®šæ¯”æ ¹èŠ‚ç‚¹å¤§ï¼Œä»¥æ­¤é€’å½’ï¼Œä»æ•°ç»„å³å¯åˆ¤æ–­æ˜¯å¦ä¸ºäºŒå‰æœç´¢æ ‘ï¼Œæ³¨æ„æ¯æ¬¡é€’å½’æ—¶éœ€è¦æŠŠæ ¹èŠ‚ç‚¹å»æ‰ä¹‹åæ‰èƒ½è¿›å…¥å·¦å³å­æ ‘çš„é€’å½’ã€‚</p>
<p>ï¼ˆå› ä¸ºååºéå†ï¼Œæ ¹èŠ‚ç‚¹åœ¨æœ€åï¼Œè€Œæ¯æ£µå­æ ‘çš„æ ¹èŠ‚ç‚¹æ˜¯ä¸ä¸€è‡´çš„ï¼‰</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verifyPostorder</span><span class="params">(<span class="keyword">int</span>[] postorder)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> recur(postorder, <span class="number">0</span>, postorder.length - <span class="number">1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">recur</span><span class="params">(<span class="keyword">int</span>[] postorder, <span class="keyword">int</span> i, <span class="keyword">int</span> j)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (i &gt;= j) <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        <span class="keyword">int</span> l = i; <span class="comment">// å·¦å­æ ‘ä¸‹æ ‡</span></span><br><span class="line">        <span class="keyword">while</span> (postorder[l] &lt; postorder[j]) l++; <span class="comment">// å·¦å­æ ‘å°äºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">        <span class="keyword">int</span> r = l; <span class="comment">// å³å­æ ‘ä¸‹æ ‡</span></span><br><span class="line">        <span class="keyword">while</span> (postorder[r] &gt; postorder[j]) r++; <span class="comment">// å³å­æ ‘å¤§äºæ ¹èŠ‚ç‚¹</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> r == j &amp;&amp; recur(postorder, i, l - <span class="number">1</span>) &amp;&amp; recur(postorder, l, j - <span class="number">1</span>); <span class="comment">// å°¤å…¶è¦æ³¨æ„å³å­æ ‘çš„æ ¹èŠ‚ç‚¹æ¯æ¬¡éœ€è¦ -1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>æ—¶é—´å¤æ‚åº¦ï¼šO(N^2), æ¯æ¬¡è°ƒç”¨ recur(i,j) å‡å»ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œå› æ­¤é€’å½’å ç”¨ O(N)ï¼›æœ€å·®æƒ…å†µä¸‹ï¼ˆå³å½“æ ‘é€€åŒ–ä¸ºé“¾è¡¨ï¼‰ï¼Œæ¯è½®é€’å½’éƒ½éœ€éå†æ ‘æ‰€æœ‰èŠ‚ç‚¹ï¼Œå ç”¨ O(N)ã€‚
ç©ºé—´å¤æ‚åº¦ï¼šO(N), æœ€å·®æƒ…å†µä¸‹ï¼ˆå³å½“æ ‘é€€åŒ–ä¸ºé“¾è¡¨ï¼‰, é€’å½’æ·±åº¦å°†è¾¾åˆ° Nã€‚
æ‰§è¡Œè€—æ—¶:0 ms, å‡»è´¥äº† 100.00% çš„ Java ç”¨æˆ·
å†…å­˜æ¶ˆè€—:36 MB, å‡»è´¥äº† 32.88% çš„ Java ç”¨æˆ· </code></pre><h3 id="è¾…åŠ©æ ˆ"><a href="# è¾…åŠ©æ ˆ" class="headerlink" title="è¾…åŠ©æ ˆ"></a> è¾…åŠ©æ ˆ</h3><ul>
<li>éå† â€œååºéå†çš„å€’åºâ€ ä¼šå¤šæ¬¡é‡åˆ°é€’å‡èŠ‚ç‚¹ <em>r_i</em> ï¼Œè‹¥æ‰€æœ‰çš„é€’å‡èŠ‚ç‚¹ <em>r_i</em> å¯¹åº”çš„çˆ¶èŠ‚ç‚¹ <em>root</em> éƒ½æ»¡è¶³ä»¥ä¸Šæ¡ä»¶ï¼Œåˆ™å¯åˆ¤å®šä¸ºäºŒå‰æœç´¢æ ‘ã€‚</li>
<li>æ ¹æ®ä»¥ä¸Šç‰¹ç‚¹ï¼Œè€ƒè™‘å€ŸåŠ© <strong>å•è°ƒæ ˆ</strong> å®ç°ï¼š<ol>
<li>å€ŸåŠ©ä¸€ä¸ªå•è°ƒæ ˆ <em>stack</em> å­˜å‚¨å€¼é€’å¢çš„èŠ‚ç‚¹ï¼›</li>
<li>æ¯å½“é‡åˆ°å€¼é€’å‡çš„èŠ‚ç‚¹ <em>r_i</em> ï¼Œåˆ™é€šè¿‡å‡ºæ ˆæ¥æ›´æ–°èŠ‚ç‚¹ <em>r_i</em> çš„çˆ¶èŠ‚ç‚¹ <em>root</em> ï¼›</li>
<li>æ¯è½®åˆ¤æ–­ <em>r_i</em> å’Œ <em>root</em>  çš„å€¼å…³ç³»ï¼š<ol>
<li>è‹¥ <em>r_i &gt; root</em> åˆ™è¯´æ˜ä¸æ»¡è¶³äºŒå‰æœç´¢æ ‘å®šä¹‰ï¼Œç›´æ¥è¿”å› <em>false</em> ã€‚</li>
<li>è‹¥ <em>r_i &lt; root</em> åˆ™è¯´æ˜æ»¡è¶³äºŒå‰æœç´¢æ ‘å®šä¹‰ï¼Œåˆ™ç»§ç»­éå†ã€‚</li>
</ol>
</li>
</ol>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Solution</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">verifyPostorder</span><span class="params">(<span class="keyword">int</span>[] postorder)</span> </span>&#123;</span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> Stack&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> root = Integer.MAX_VALUE;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = postorder.length - <span class="number">1</span>; i &gt;= <span class="number">0</span>; i--) &#123;</span><br><span class="line">            <span class="keyword">if</span> (postorder[i] &gt; root) <span class="keyword">return</span> <span class="keyword">false</span>; <span class="comment">// æ‰€æœ‰èŠ‚ç‚¹å‡éœ€å°äºæ ¹èŠ‚ç‚¹</span></span><br><span class="line">            <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; stack.peek() &gt; postorder[i]) <span class="comment">// é‡åˆ°é€’å‡èŠ‚ç‚¹ï¼Œè¯´æ˜æ­¤æ—¶ä»æŸæ ¹èŠ‚ç‚¹çš„å³å­æ ‘éå†åˆ°äº†å·¦å­æ ‘</span></span><br><span class="line">                root = stack.pop(); <span class="comment">// è®°å½•æ ¹èŠ‚ç‚¹</span></span><br><span class="line">            stack.push(postorder[i]); <span class="comment">// å­˜å‚¨é€’å¢èŠ‚ç‚¹</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// æ­¤æ—¶ stack ä¸ä¸€å®šä¸ºç©º</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<pre><code>æ—¶é—´å¤æ‚åº¦ï¼šO(N), éå†  postorder æ‰€æœ‰èŠ‚ç‚¹ï¼Œå„èŠ‚ç‚¹å‡å…¥æ ˆ / å‡ºæ ˆä¸€æ¬¡ï¼Œä½¿ç”¨ O(N) æ—¶é—´ã€‚
ç©ºé—´å¤æ‚åº¦ï¼šO(N), æœ€å·®æƒ…å†µä¸‹ï¼Œå•è°ƒæ ˆ stack å­˜å‚¨æ‰€æœ‰èŠ‚ç‚¹ï¼Œä½¿ç”¨ O(N) é¢å¤–ç©ºé—´ã€‚
æ‰§è¡Œè€—æ—¶:1 ms, å‡»è´¥äº† 21.30% çš„ Java ç”¨æˆ·
å†…å­˜æ¶ˆè€—:35.9 MB, å‡»è´¥äº† 45.40% çš„ Java ç”¨æˆ·</code></pre>
      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/8/">8</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="cloud"
      src="/images/avatar.png">
  <p class="site-author-name" itemprop="name">cloud</p>
  <div class="site-description" itemprop="description">Less is more.</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">76</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">8</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">57</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/cloudchenc" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;cloudchenc" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:cloudchenc@gmail.com" title="E-Mail â†’ mailto:cloudchenc@gmail.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">cloud</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">Symbols count total: </span>
    <span title="Symbols count total">369k</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
      <span class="post-meta-item-text">Reading time total &asymp;</span>
    <span title="Reading time total">5:36</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a>
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  


</body>
</html>
