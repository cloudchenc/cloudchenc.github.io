---
title: 布局优化
tags:
categories: 性能优化
---

Android中的布局加载流程：
* 1、在setContentView方法中，会通过LayoutInflater的inflate方法去加载对应的布局。
* 2、inflate方法中首先会调用Resources的getLayout方法去通过IO的方式去加载对应的Xml布局解析器到内存中。
* 3、接着，会通过createViewFromTag根据每一个tag创建具体的View对象。
* 4、它内部主要是按优先顺序为Factory2和Factory的onCreatView、createView方法进行View的创建，而createView方法内部采用了构造器反射的方式实现。
从以上分析可知，在Android的布局加载流程中，性能瓶颈主要存在两个地方：
* 1、布局文件解析中的IO过程。
* 2、创建View对象时的反射过程。

1. 减少布局层级 根本上是减少ViewRootImpl调用 performTraversals()方法的耗时

2. 布局复用

3. 
